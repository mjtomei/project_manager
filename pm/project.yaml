project:
  name: project-manager
  repo: https://github.com/mjtomei/project_manager.git
  base_branch: master
  backend: github
  active_pr: pr-92301fc
  guide_deps_reviewed: true
  repo_id: 828c8d0a91034cd541f443dd0aee62961e2af75a
  last_pr_sync: '2026-03-02T01:48:48.618942+00:00'
  hide_merged: true
plans:
- id: plan-001
  name: Import from existing repo
  file: plans/plan-001.md
  status: draft
- id: plan-002
  name: Multi-candidate test-driven code generation
  file: plans/plan-002.md
  status: draft
- id: plan-003
  name: Multiuser Support
  file: plans/plan-003.md
  status: draft
- id: plan-e4fa5cb
  name: refactor for code quality
  file: plans/plan-e4fa5cb.md
  status: done
- id: plan-c493724
  name: project metrics and optimization
  file: plans/plan-c493724.md
  status: draft
prs:
- id: pr-001
  plan: plan-001
  title: Add background cluster computation to plan import
  branch: pm/pr-001-add-background-cluster-computation-to-plan-import
  status: pending
  depends_on: []
  description: Run cluster extraction in parallel when `_run_plan_import` starts,
    so results are available without blocking the interactive flow
  agent_machine: null
  gh_pr: null
  created_at: null
  updated_at: null
- id: pr-002
  plan: plan-001
  title: Include cluster suggestions in import prompt
  branch: pm/pr-002-include-cluster-suggestions-in-import-prompt
  status: pending
  depends_on:
  - pr-001
  description: Add cluster analysis results as a "Phase 1.5" in the import prompt
    - Claude receives clusters as a suggested starting point for PR decomposition,
    which can be used, modified, or ignored
  agent_machine: null
  gh_pr: null
  created_at: null
  updated_at: null
- id: pr-003
  plan: plan-001
  title: Add cluster-first option to guide workflow
  branch: pm/pr-003-add-cluster-first-option-to-guide-workflow
  status: pending
  depends_on: []
  description: In the guide's "initialized" step, offer `pm cluster explore` as an
    alternative path alongside `pm plan add`, giving users a choice between manual
    and automated starting points
  agent_machine: null
  gh_pr: null
  created_at: null
  updated_at: null
- id: pr-004
  plan: plan-001
  title: Smart repo-size detection with approach recommendation
  branch: pm/pr-004-smart-repo-size-detection-with-approach-recommenda
  status: pending
  depends_on:
  - pr-003
  description: Detect repo size (lines of code) and recommend manual vs cluster-based
    approach automatically - small repos get manual suggestion, large repos get cluster
    suggestion
  agent_machine: null
  gh_pr: null
  created_at: null
  updated_at: null
- id: pr-005
  plan: plan-001
  title: Improve git remote detection in pm init
  branch: pm/pr-005-improve-git-remote-detection-in-pm-init
  status: merged
  depends_on: []
  description: pm init hardcodes 'origin' remote, but repos may have multiple remotes
    or use different naming (e.g., 'github', 'upstream'). Should detect the correct
    remote by checking if it exists/works, letting user choose when ambiguous, or
    preferring remotes matching the detected backend.
  agent_machine: spark-424d
  gh_pr: null
  workdir: null
  created_at: null
  updated_at: null
- id: pr-006
  plan: plan-001
  title: Add automatic PR sync on TUI refresh and periodic background check
  branch: pm/pr-006-add-automatic-pr-sync-on-tui-refresh-and-periodic-
  status: merged
  depends_on: []
  description: 'Currently pm pr sync must be run manually. Add: (1) automatic sync
    when TUI refreshes (r key), (2) periodic background sync every 5 minutes in TUI,
    (3) sync before pr-related commands. Store last sync timestamp to avoid excessive
    API calls.'
  agent_machine: spark-424d
  gh_pr: null
  workdir: null
  created_at: null
  updated_at: null
- id: pr-007
  plan: plan-001
  title: 'GitHub backend: Create draft PR at start, upgrade on done'
  branch: pm/pr-007-github-backend-create-draft-pr-at-start-upgrade-on
  status: merged
  depends_on: []
  description: 'Change GitHub backend flow: (1) pm pr start creates a draft PR immediately
    after first push, stores gh_pr number in project.yaml, (2) pm pr done upgrades
    draft to ready-for-review using ''gh pr ready'', (3) status becomes in_review
    only after upgrading. This gives visibility into WIP earlier and uses GitHub''s
    native draft PR workflow.'
  agent_machine: spark-424d
  gh_pr: null
  workdir: null
  created_at: null
  updated_at: null
- id: pr-009
  plan: plan-001
  title: Auto-rebalance after pane launch
  branch: pm/pr-009-auto-rebalance-after-pane-launch
  status: merged
  depends_on: []
  description: After launching a new pane, the layout should automatically rebalance.
    Currently requires manual 'b' keypress to rebalance.
  agent_machine: spark-424d
  gh_pr: null
  workdir: null
  created_at: null
  updated_at: null
- id: pr-010
  plan: plan-001
  title: Isolate workdir pm state from main repo
  branch: pm/pr-010-isolate-workdir-pm-state-from-main-repo
  status: merged
  depends_on: []
  description: 'Agents in workdirs can modify pm/project.yaml and push to GitHub,
    which then gets synced to the main TUI causing unexpected state changes (test
    PRs appearing, status changes, etc.).


    Fix options:

    1. Workdirs should not include pm/ directory at all - agents work on code only

    2. Or workdirs get a read-only copy of pm/ that isn''t pushed

    3. Or agents are instructed not to modify pm state except their own PR status

    4. Or git_ops.sync_state() should only pull pm/ changes from master, not from
    PR branches


    Recommended: Option 1 - exclude pm/ from workdir clones since agents only need
    the code, not the project management state.'
  agent_machine: spark-424d
  gh_pr: null
  workdir: null
  created_at: null
  updated_at: null
- id: pr-011
  title: Fix plans pane w key launching wrong action
  branch: null
  status: merged
  depends_on: []
  description: 'In the plans pane, pressing w (breakdown) sometimes launches pm plan
    review instead of pm plan breakdown. The PlanAction("breakdown") message is posted
    correctly by plans_pane.py, but the app handler routes it to the wrong command.


    Reproduction steps:

    1. Open the TUI and press P to enter plans view

    2. Select a plan (e.g. plan-001)

    3. Press w to trigger breakdown

    4. Check pane registry: the new pane has role "plan-review" running "pm plan review
    plan-001" instead of role "plan-breakdown" running "pm plan breakdown plan-001"

    5. Also observed: first w press sometimes produces no pane at all (no log entry
    for "plan action: breakdown"), while a second w press creates the wrong pane type


    The mismatch may indicate the on_plan_action handler is receiving a different
    action string than expected, or there is a code path where the running TUI code
    diverges from the source on disk.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/32
  gh_pr_number: 32
  workdir: null
  created_at: null
  updated_at: null
- id: pr-012
  plan: plan-002
  title: Local model runner with OpenAI-compatible API
  branch: pm/pr-012-local-model-runner-with-openai-compatible-api
  status: closed
  depends_on: []
  description: 'Create a module that manages local LLM inference via the OpenAI-compatible
    API exposed by local serving backends (see `pm/plans/plan-002.md` for the broader
    multi-candidate generation strategy). Support three backends with automatic platform
    detection: llama.cpp server on macOS, sglang and vllm on Linux. All three expose
    the same OpenAI-compatible chat/completions endpoint, so the core runner uses
    a single HTTP client with backend-specific server management (health checks, model
    listing). Server URL is configured via `PM_BENCH_URL` environment variable with
    a sensible default per backend (e.g. `http://localhost:8080` for llama.cpp, `http://localhost:30000`
    for sglang). Support sending prompts to a configurable model, collecting responses,
    and running multiple generations with different temperatures in parallel. Track
    token counts and wall-clock time per request for downstream cost analysis. Include
    a CLI command (`pm bench models`) that detects the available backend, lists loaded
    models, and validates connectivity.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/33
  gh_pr_number: 33
  workdir: null
  created_at: null
  updated_at: null
- id: pr-013
  plan: plan-002
  title: Aider polyglot exercise loader
  branch: pm/pr-013-aider-polyglot-exercise-loader
  status: closed
  depends_on: []
  description: 'Load the Exercism exercises used by aider''s polyglot benchmark (https://github.com/Aider-AI/aider
    — see `benchmark/` directory for exercise structure). Each exercise has a problem
    description, starter code, and a reference test suite. Parse exercises into a
    structured format: {language, slug, description, starter_code, reference_tests}.
    Support filtering by language and exercise name. Clone or download the exercise
    set from aider''s benchmark repo and cache it locally under `~/.cache/pm-bench/exercises/`.
    Include a CLI command (`pm bench exercises`) that downloads/updates the exercise
    cache and lists available exercises with optional `--language` filter.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/34
  gh_pr_number: 34
  workdir: null
  created_at: null
  updated_at: null
- id: pr-014
  plan: plan-002
  title: Test generation from problem descriptions
  branch: pm/pr-014-test-generation-from-problem-descriptions
  status: closed
  depends_on: []
  description: 'Given an exercise''s problem description and starter code (but NOT
    the reference tests), generate test cases using a local model. The core insight
    from the plan (`pm/plans/plan-002.md`): verification is easier than generation
    — a model that scores poorly on single-pass coding can generate useful tests that
    filter better solutions from multiple candidates. Use the problem description
    and function signatures to produce tests that verify correctness. Generate tests
    at multiple temperatures and with prompt variations to increase diversity. Deduplicate
    and validate generated tests (must parse, must be syntactically valid, must reference
    the correct function names). Return a merged test suite as a single source file
    string per language''s test convention.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/35
  gh_pr_number: 35
  workdir: null
  created_at: null
  updated_at: null
- id: pr-015
  plan: plan-002
  title: Multi-candidate solution generation
  branch: pm/pr-015-multi-candidate-solution-generation
  status: closed
  depends_on: []
  description: Given an exercise's starter code, problem description, and a test suite
    (either generated or reference), produce N candidate solutions using a local model.
    Vary temperature (0.0 to 1.0) and prompt format (direct, chain-of-thought, example-driven).
    Multi-model support (querying different models on the same backend) is a stretch
    goal — the initial implementation should work well with a single model and temperature/prompt
    diversity. Each candidate is a complete file that should compile and pass the
    tests. Return candidates as a list of {code, temperature, prompt_variant, model}.
    See `pm/plans/plan-002.md` for how candidate diversity feeds into tournament selection.
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/36
  gh_pr_number: 36
  workdir: null
  created_at: null
  updated_at: null
- id: pr-016
  plan: plan-002
  title: Test execution and candidate scoring
  branch: pm/pr-016-test-execution-and-candidate-scoring
  status: closed
  depends_on:
  - pr-013
  description: 'Run a test suite against a candidate solution in an isolated environment.
    Use temporary directories with copies of the exercise scaffold — each candidate
    gets its own temp directory, solution file is written in, and the language-appropriate
    test runner is invoked via subprocess with a timeout. Support the 6 polyglot languages
    with appropriate build/test commands: `pytest` for Python, `go test` for Go, `cargo
    test` for Rust, `npm test` / `jest` for JavaScript, `javac` + `junit` for Java,
    `cmake` + `ctest` or `g++` + run for C++. Return per-test pass/fail results and
    an overall score. Score candidates as (passing_tests / total_tests). Handle compilation
    failures, timeouts, and runtime errors gracefully.'
  agent_machine: null
  gh_pr: null
  gh_pr_number: null
  created_at: null
  updated_at: null
- id: pr-017
  plan: plan-002
  title: 'Benchmark: multi-candidate code generation with tournament selection'
  branch: pm/pr-017-benchmark-orchestrator-with-tournament-selection-v2
  status: merged
  depends_on: []
  description: 'Collapsed implementation of the full benchmark pipeline from plan-002.
    Includes: OpenAI-compatible multi-backend runner (llama.cpp/sglang/vllm), Exercism
    exercise loader from aider''s polyglot-benchmark, test generation from problem
    descriptions, multi-candidate solution generation, test execution with 6-language
    support, and tournament orchestrator with baseline comparison, cost metrics, and
    JSON export. CLI commands: pm bench models, pm bench exercises, pm bench run.
    Supersedes pr-012 through pr-016. MANUAL TESTING (INPUT_REQUIRED): Integration
    testing requires a running local inference backend (llama.cpp, sglang, or vllm)
    with a loaded model. pm bench models validates connectivity. pm bench exercises
    requires network access to clone aider''s benchmark repo. pm bench run exercises
    the full pipeline and needs language toolchains for multi-language execution.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/69
  gh_pr_number: 69
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-017-benchmark-orchestrator-with-tournament-s-012e3bc5
  notes:
  - id: note-017-a1
    text: 'Reasoning mode: enabled vLLM reasoning (reasoning_effort=high, max_completion_tokens=32768)
      for both test generation and solution generation.'
    created_at: '2026-02-24T15:20:00Z'
    last_edited: '2026-02-24T15:20:00Z'
  - id: note-017-a2
    text: 'Chain mode (--chain): sequential generation where each candidate/test-suite
      sees prior attempts. Test suites merged by deduplicating function names.'
    created_at: '2026-02-24T15:20:01Z'
    last_edited: '2026-02-24T15:20:01Z'
  - id: note-017-a3
    text: 'Parallel exercises (-j/--parallel): concurrent exercise execution via ThreadPoolExecutor.'
    created_at: '2026-02-24T15:20:02Z'
    last_edited: '2026-02-24T15:20:02Z'
  - id: note-017-a4
    text: 'HyperParams: CLI flags --variant, --temperature, --chain, --test-subsets
      for per-run overrides.'
    created_at: '2026-02-24T15:20:03Z'
    last_edited: '2026-02-24T15:20:03Z'
  - id: note-017-a5
    text: 'Prompt improvements: test gen system prompt rewritten for step-by-step
      reasoning on expected values and exact signature matching. Solution prompts
      include filenames.'
    created_at: '2026-02-24T15:20:04Z'
    last_edited: '2026-02-24T15:20:04Z'
  - id: note-017-a6
    text: 'Token accounting: separate tournament_tokens/baseline_tokens on ExerciseResult
      for pr-018. Schema version bumped to 2.'
    created_at: '2026-02-24T15:20:05Z'
    last_edited: '2026-02-24T15:20:05Z'
  - id: note-017-a7
    text: Stored generated_test_code on ExerciseResult for pr-019 test quality analysis.
    created_at: '2026-02-24T15:20:06Z'
    last_edited: '2026-02-24T15:20:06Z'
  - id: note-017-a8
    text: 'Benchmark results (Python, 34 exercises): 120B default T=45.5% B=45.0%
      D=+0.5%; 120B chain (no reasoning) T=43.4% B=48.6% D=-5.2%; 120B chain+reasoning
      T=53.8% B=50.1% D=+3.7%; 20B chain T=42.7% B=35.5% D=+7.2%.'
    created_at: '2026-02-24T15:20:07Z'
    last_edited: '2026-02-24T15:20:07Z'
  - id: note-017-a9
    text: 'Key finding: reasoning mode is the biggest lever (+8pp tournament, +5pp
      baseline). Tournament selection reliably helps with reasoning enabled.'
    created_at: '2026-02-24T15:20:08Z'
    last_edited: '2026-02-24T15:20:08Z'
  - id: note-5971d12
    text: 'Running the benchmark: pytest must be installed in the pm venv (pip install
      pytest). Two vLLM containers on NVIDIA GB10 (~128GB unified memory, mxfp4 quant):
      vllm-120b on port 30000, vllm-20b on port 30001. Stop one to give the other
      full GPU (docker stop vllm-120b).'
    created_at: '2026-02-25T11:22:08Z'
    last_edited: '2026-02-25T11:22:08Z'
  created_at: null
  updated_at: null
- id: pr-018
  plan: plan-002
  title: Baseline measurement and analysis
  branch: pm/pr-018-baseline-measurement-and-analysis
  status: pending
  depends_on:
  - pr-409b580
  description: 'Add a CLI command pm bench analyze that reads benchmark result JSON
    files (schema v2) produced by the orchestrator and generates comparison reports.
    pr-017 already outputs separate tournament_tokens/baseline_tokens per ExerciseResult,
    so cost analysis can compute per-configuration token totals directly. Run the
    benchmark via pm bench run in single-pass mode (N=1, no test generation) to establish
    the baseline, then with tournament (N=8, N=16) and compare. Produce a report showing:
    baseline vs tournament scores per language, per exercise difficulty tier (easy/medium/hard,
    based on baseline pass rate — easy: >66% of models solve it, hard: <33%), and
    aggregate. Include cost analysis — total tokens generated, wall-clock time, and
    tokens-per-correct-exercise for each configuration. Identify which exercises benefit
    most from multi-candidate generation (large delta) vs which are insensitive. Save
    analysis results to a JSON file for tracking over time.'
  agent_machine: null
  gh_pr: null
  gh_pr_number: null
  created_at: null
  updated_at: null
- id: pr-019
  plan: plan-002
  title: Generated test quality analysis
  branch: pm/pr-019-generated-test-quality-analysis
  status: pending
  depends_on:
  - pr-409b580
  description: 'Add a CLI command pm bench test-quality that analyzes how well generated
    tests compare to reference tests. pr-017 stores generated_test_code on ExerciseResult
    and includes both generated and reference test outcomes per candidate in the JSON
    output. Measure: (1) coverage overlap — compute rank correlation between generated
    and reference test scores across candidates (do generated tests rank candidates
    in the same order as reference tests?), (2) false positives — identify generated
    tests that pass on candidates failing all reference tests, (3) diversity — count
    distinct pass/fail signatures across generated tests. Cross-reference with benchmark
    results: do exercises where generated tests diverge most from reference tests
    also show the largest gap between tournament-selected and oracle-selected scores?
    Results from pr-017 notes show tournament selection helps most with reasoning
    enabled (+3.7pp for 120B, +7.2pp for 20B), suggesting test quality correlates
    with reasoning capability.'
  agent_machine: null
  gh_pr: null
  gh_pr_number: null
  created_at: null
  updated_at: null
- id: pr-020
  plan: null
  title: Fix TUI command deduplication for concurrent PR actions
  branch: pm/pr-020-fix-tui-command-deduplication-for-concurrent-pr-ac
  status: merged
  depends_on: []
  description: 'The TUI allows the same action (e.g. pr start) to be triggered multiple
    times before the first invocation completes, and allows the same action on multiple
    PRs simultaneously, causing race conditions and buggy behavior. Add guards to
    prevent: (1) re-triggering an action while it is still running, (2) running conflicting
    actions on different PRs concurrently (e.g. two pr starts). Track in-flight actions
    and either queue or reject duplicates, showing a status message to the user.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/38
  gh_pr_number: 38
  workdir: null
  created_at: null
  updated_at: null
- id: pr-021
  plan: null
  title: Fix tmux commands to target current grouped session instead of base
  branch: pm/pr-021-fix-tmux-commands-to-target-current-grouped-sessio
  status: merged
  depends_on: []
  description: Commands that switch windows or interact with the tmux session (e.g.
    automatic window switching) target the base session name instead of the current
    grouped session. Need a helper that detects the current grouped session and targets
    that, falling back to the base session when not inside tmux.
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/39
  gh_pr_number: 39
  workdir: null
  created_at: null
  updated_at: null
- id: pr-022
  plan: plan-003
  title: Handle merging pm directory changes across clones
  branch: pm/pr-022-handle-merging-pm-directory-changes-across-clones
  status: merged
  depends_on: []
  description: When PRs are added in two separate clones/workdirs, the pm/project.yaml
    can diverge. Need a strategy for merging pm directory changes (e.g. new PRs added
    concurrently) — could be a git pull/merge of the pm directory, a TUI key to sync,
    or automatic conflict resolution.
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/40
  gh_pr_number: 40
  workdir: null
  created_at: null
  updated_at: null
- id: pr-023
  plan: null
  title: Fix rebalance layout for grouped sessions with different terminal sizes
  branch: pm/pr-023-fix-rebalance-layout-for-grouped-sessions-with-dif
  status: merged
  depends_on: []
  description: When multiple terminals are attached via grouped sessions with different
    aspect ratios (e.g. portrait vs landscape), rebalance computes layout based on
    the shared window size (minimum of all clients) rather than the calling terminal's
    size. This means a portrait monitor doesn't get a horizontal split layout. Need
    to investigate tmux aggressive-resize or alternative approaches.
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/41
  gh_pr_number: 41
  workdir: null
  created_at: null
  updated_at: null
- id: pr-024
  plan: plan-003
  title: Add multi-user support to sessions
  branch: pm/pr-024-add-multi-user-support-to-sessions
  status: merged
  depends_on: []
  description: Add support for two users on the same computer accessing the same pm
    session simultaneously. This is done by creating a tmux session with a session
    file that is accessible to a given group or all users on the system optionally.
    The choice between groups or global accessibility is controlled by a session command
    flag. The default continues to be accessibility only to the current user. Other
    users can access the same session by passing the same flags as well as the directory
    in which the original user started the session. The code uses that directory to
    correctly identify what the session tag is.
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/52
  gh_pr_number: 52
  workdir: null
  created_at: null
  updated_at: null
- id: pr-142f20c
  plan: plan-e4fa5cb
  title: Convert cli.py to cli/ package and extract shared helpers
  branch: pm/pr-142f20c-convert-cli-py-to-cli-package-and-extract-shared-h
  status: merged
  depends_on: []
  description: Convert the monolithic pm_core/cli.py (4,427 lines) into a pm_core/cli/
    subpackage. Create cli/__init__.py with the `cli` Click group, `main` entry point,
    and the core commands (init, push, set, help, getting-started, which, prompt)
    — these stay in __init__.py. Move HelpGroup, load_and_sync, save_and_push, trigger_tui_refresh,
    _pr_id_sort_key, _pr_display_id, _resolve_pr_id, _infer_pr_id, _workdirs_dir,
    _resolve_repo_id, and state_root into cli/helpers.py. The __init__.py re-exports
    `cli` and `main` at module level so that `from pm_core.cli import cli` and `from
    pm_core.cli import main` continue to work (used by tests, __main__.py, and wrapper.py).
    This is the foundation for the next PR which splits all command groups into submodules.
    See `pm/plans/plan-e4fa5cb.md` for the overall split strategy and target line
    counts.
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/57
  gh_pr_number: 57
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-142f20c-convert-cli-py-to-cli-package-and-ex-b41f9a32
  created_at: null
  updated_at: null
- id: pr-35b18e8
  plan: plan-e4fa5cb
  title: Split all CLI command groups into cli/ submodules
  branch: pm/pr-35b18e8-split-all-cli-command-groups-into-cli-submodules
  status: merged
  depends_on:
  - pr-142f20c
  description: 'Complete the cli/ package split by moving all remaining command groups
    out of cli/__init__.py into dedicated submodules. Each submodule imports `cli`
    from `pm_core.cli` and registers its commands; the __init__.py imports all submodules
    at the bottom to trigger registration. Submodules to create: (1) cli/pr.py (~940
    lines) — `pr` group: add, edit, select, cd, list, graph, ready, start, done, sync,
    sync-github, import-github, cleanup, close, plus `_launch_review_window` helper
    for code review pane. (2) cli/plan.py (~775 lines) — `plan` group: add, list,
    breakdown, review, deps, load, fixes, fix, import, plus _run_plan_import and _import_github_prs.
    (3) cli/session.py (~560 lines) — `session` group, `_register_tmux_bindings`,
    `_session_start`, internal pane/window commands (`_pane-exited`, `_pane-closed`,
    `_pane-opened`, `_window-resized`, `_pane-switch`, `rebalance`), session registry
    commands (`_save-session`, `_clear-session`). Note: pane-exited now passes pane_id
    and window for multi-window registry support. (4) cli/tui.py (~570 lines) — `tui`
    group: view, history, send, keys, clear-history, capture, frames, clear-frames,
    test, plus frame/history helpers and internal _tui launcher. (5) cli/guide.py
    (~300 lines) — guide group, _run_guide, notes command. (6) cli/meta.py (~335 lines)
    — meta command, _detect_pm_install, _build_meta_prompt, _meta_workdir. (7) cli/cluster.py
    (~220 lines) — cluster group: auto, explore. All submodules import shared helpers
    from `pm_core.cli.helpers`. After this PR, cli/__init__.py is trimmed to ~530
    lines (init, push, set, help, getting-started, which, prompt, plus submodule imports).
    See `pm/plans/plan-e4fa5cb.md` for the full cli/ split strategy table.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/62
  gh_pr_number: 62
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-35b18e8-split-all-cli-command-groups-into-cl-e742c9f2
  created_at: null
  updated_at: null
- id: pr-f24211b
  plan: plan-e4fa5cb
  title: Split app.py into screens, widgets, and pane_ops
  branch: pm/pr-f24211b-split-app-py-into-screens-widgets-and-pane-ops
  status: merged
  depends_on: []
  description: 'Reduce tui/app.py from 2,230 lines to ~950 by extracting four categories
    of code into new modules: (1) tui/screens.py (~500 lines) — move WelcomeScreen,
    ConnectScreen, HelpScreen, PlanPickerScreen, PlanAddScreen. (2) tui/widgets.py
    (~100 lines) — move TreeScroll, StatusBar, LogLine. (3) tui/pane_ops.py (~560
    lines) — extract pane launch (`_launch_pane` with `fresh` param for pane recreation),
    kill, rebalance, zoom logic, and `_heal_registry` (multi-window registry repair)
    from ProjectManagerApp into standalone functions. (4) tui/_shell.py (~60 lines)
    — extract `_run_shell` and `_run_shell_async` helpers. The app delegates to pane_ops
    functions, passing the app instance or necessary state as parameters. After this
    PR, app.py contains ProjectManagerApp core lifecycle, event handling, z-modifier
    key handling (`_consume_z`), and sticky log messages. See `pm/plans/plan-e4fa5cb.md`
    for the tui/app.py split strategy.


    Tests: Run `pytest tests/` — all existing tests pass unchanged (including tests/test_shared_sessions.py
    which tests ConnectScreen, and tests/test_plans_pane.py which tests PlansPane
    and imports ProjectManagerApp). Add import smoke tests in a new tests/test_tui_imports.py
    that verify: (1) all screen classes can be imported from tui.screens, (2) all
    widget classes can be imported from tui.widgets, (3) pane_ops functions can be
    imported and have the expected signatures, (4) _shell helpers can be imported,
    (5) app.py re-exports or correctly imports from the new modules so existing `from
    pm_core.tui.app import ProjectManagerApp` still works.


    Files: pm_core/tui/app.py (modify — remove screen/widget/pane classes and methods,
    add imports), pm_core/tui/screens.py (create — ~500 lines), pm_core/tui/widgets.py
    (create — ~100 lines), pm_core/tui/pane_ops.py (create — ~560 lines), pm_core/tui/_shell.py
    (create — ~60 lines), tests/test_tui_imports.py (create — import smoke tests)'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/61
  gh_pr_number: 61
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-f24211b-split-app-py-into-screens-widgets-an-b41f9a32
  created_at: null
  updated_at: null
- id: pr-0662fce
  plan: plan-e4fa5cb
  title: Extract tree layout and abstract TUI message factory
  branch: pm/pr-0662fce-extract-tree-layout-and-abstract-tui-message-facto
  status: merged
  depends_on: []
  description: 'Two related changes to tui/ code, combined because both modify tech_tree.py:
    (1) Move the tree layout algorithm (node positioning, column assignment, edge
    routing) from tech_tree.py into a new tui/tree_layout.py (~330 lines). TechTree
    widget calls layout functions and retains rendering + keyboard handling. Reduces
    tech_tree.py from 834 to ~500 lines. (2) Create a generic message factory function
    `item_message(name, field)` in tui/__init__.py that generates Selected/Activated
    message class pairs with a single ID field. Replace the boilerplate PlanSelected/PlanActivated
    in plans_pane.py, TestSelected/TestActivated in tests_pane.py, and PRSelected/PRActivated
    in tech_tree.py with factory-generated classes. See `pm/plans/plan-e4fa5cb.md`
    for the tech_tree.py split strategy and message factory design.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/56
  gh_pr_number: 56
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-0662fce-extract-tree-layout-and-abstract-tui-b41f9a32
  created_at: null
  updated_at: null
- id: pr-7671dc7
  plan: plan-e4fa5cb
  title: Extract pane registry I/O from pane_layout.py
  branch: pm/pr-7671dc7-extract-pane-registry-i-o-from-pane-layout-py
  status: merged
  depends_on: []
  description: 'Move registry CRUD and lookup functions from pane_layout.py (now 614
    lines after multi-window registry refactor) into a new pane_registry.py. Functions
    to move: `registry_dir`, `registry_path`, `load_registry` (includes old→new format
    migration), `save_registry`, `register_pane` (per-window), `unregister_pane` (searches
    all windows), `kill_and_unregister`, `find_live_pane_by_role` (with optional `window`
    scoping), `_get_window_data`, `_iter_all_panes`, `_reconcile_registry` (per-window
    dead pane cleanup). pane_layout.py keeps the layout algorithm (`_layout_node`,
    `compute_layout`, `_checksum`), `rebalance`, mobile detection, and lifecycle event
    handlers (`handle_pane_exited`, `handle_any_pane_closed`, `handle_pane_opened`,
    `check_user_modified`) which orchestrate both registry and layout operations.
    The lifecycle handlers import from pane_registry. Update all callers across the
    codebase (cli/__init__.py or cli/session.py, tui/app.py or tui/pane_ops.py — whichever
    exists at the time) to import from pane_registry instead. See `pm/plans/plan-e4fa5cb.md`
    for the pane_layout.py split strategy.


    Tests: Run `pytest tests/` — existing pane_layout tests (test_pane_layout.py,
    test_session_registry.py) pass. Note: test_pane_layout.py now has substantial
    registry tests from the multi-window refactor. Verify those still pass with the
    new import paths. Add tests for: (1) register_pane creates per-window registry
    entries, (2) unregister_pane removes entries across windows, (3) find_live_pane_by_role
    with and without window scoping, (4) load_registry old-format migration, (5) load_registry
    handles missing file gracefully, (6) _get_window_data creates entries on demand,
    (7) _iter_all_panes yields from all windows, (8) kill_and_unregister combines
    kill+cleanup. Add these to test_session_registry.py or create tests/test_pane_registry.py.


    Files: pm_core/pane_layout.py (modify — remove registry functions, ~340 lines
    remaining), pm_core/pane_registry.py (create — ~280 lines)'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/59
  gh_pr_number: 59
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-7671dc7-extract-pane-registry-i-o-from-pane--b41f9a32
  created_at: null
  updated_at: null
- id: pr-6ccf2a8
  plan: plan-e4fa5cb
  title: Deduplicate _extract_field and consolidate git root helpers
  branch: pm/pr-6ccf2a8-deduplicate-extract-field-and-consolidate-git-root
  status: merged
  depends_on: []
  description: '(1) Remove the duplicate _extract_field from tui/detail_panel.py (line
    43) and import it from plan_parser.py (line 79) instead — both implementations
    are identical. (2) Move _find_git_root from paths.py (line 68) and wrapper.py
    (line 17) into git_ops.py as a single get_git_root function. (3) Move the duplicate
    GitHub repo name extraction from paths.py (line 87) and wrapper.py (line 31) into
    git_ops.py. Update all callers. See `pm/plans/plan-e4fa5cb.md` for the deduplication
    strategy.


    Tests: Run `pytest tests/` — all existing tests pass. The moved functions currently
    have zero direct unit tests, so add verification tests: (1) test that _extract_field
    can be imported from plan_parser and returns correct results for typical PR description
    fields, (2) test git_ops.get_git_root finds .git dir, handles missing, traverses
    parent dirs, (3) test git_ops.get_github_repo_name with HTTPS URLs, SSH URLs,
    and edge cases, (4) test that detail_panel.py, paths.py, and wrapper.py all successfully
    import the shared versions (import smoke tests to catch broken references). Add
    these to existing test files (test_plan_parser.py, test_git_remote_detection.py)
    or create test_dedup.py.


    Files: pm_core/tui/detail_panel.py (modify — remove _extract_field, add import),
    pm_core/plan_parser.py (modify — make _extract_field public or importable), pm_core/git_ops.py
    (modify — add get_git_root and get_github_repo_name), pm_core/wrapper.py (modify
    — remove duplicates, import from git_ops), pm_core/paths.py (modify — remove duplicates,
    import from git_ops)'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/58
  gh_pr_number: 58
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-6ccf2a8-deduplicate-extract-field-and-consol-b41f9a32
  created_at: null
  updated_at: null
- id: pr-ac3625d
  plan: plan-e4fa5cb
  title: Add Claude-based TUI tests for detail panel, filters, sync, meta, and log
    viewer
  branch: pm/pr-ac3625d-add-claude-based-tui-tests-for-detail-panel-filter
  status: merged
  depends_on: []
  description: 'Add five new Claude-based TUI test prompts to tui_tests.py (which
    currently has 13 tests including the recently added multi-window-registry and
    window-resize tests) following the existing format (Background, Available Tools,
    Test Procedure, Expected Behavior, Reporting sections): (1) Detail Panel Content
    Test — verify the detail panel shows correct PR info (title, status, branch, deps,
    plan context) and updates when navigating between PRs, (2) Status Filter & Merged
    Toggle Test — test F key cycles through status filters (all → pending → in_progress
    → done) and X key toggles merged PR visibility, verify tech tree updates accordingly,
    (3) Sync Refresh Test — test r key triggers sync, verify log line updates and
    PR statuses change if PRs were merged upstream, (4) Meta Session Launch Test —
    test m key launches a meta pane, verify pane registry and correct role, (5) TUI
    Log Viewer Test — test L key opens log pane, verify content and pane lifecycle.
    Register all five in the ALL_TESTS dict at the bottom of the file, bringing the
    total to 18 tests. The multi-window registry format is now the standard — new
    test fixtures should use the `{"windows": {...}}` format, not the old flat `{"panes":
    [...]}` format. See `pm/plans/plan-e4fa5cb.md` for test descriptions.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/60
  gh_pr_number: 60
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-ac3625d-add-claude-based-tui-tests-for-detai-b41f9a32
  created_at: null
  updated_at: null
- id: pr-40bb8c2
  plan: plan-e4fa5cb
  title: Add unit tests for low-coverage modules
  branch: pm/pr-40bb8c2-add-unit-tests-for-low-coverage-modules
  status: merged
  depends_on:
  - pr-6ccf2a8
  description: 'Add comprehensive unit tests for the seven lowest-coverage modules
    to raise each above 50%. Pure logic modules (no mocking needed): graph.py (currently
    19%) — test build_adjacency with empty/linear/diamond graphs, topological_sort
    ordering, ready_prs/blocked_prs with various dependency states, compute_layers
    layering. review.py (currently 14%) — test build_fix_prompt output format, review_step
    with mocked subprocess, parse_review_file parsing. notes.py (currently 48%) —
    test notes file resolution with/without pm dir, splash text generation. Modules
    requiring mocked subprocess: git_ops.py (currently 47%) — test run_git (success,
    failure, timeout), branch name parsing, remote URL extraction, and the new get_git_root/get_github_repo_name
    from the dedup PR. detail_panel.py (currently 15%) — test plan section extraction
    using _extract_field (now imported from plan_parser after the dedup PR lands)
    and PR display formatting. tmux.py (currently 32%) — test session/window/pane
    helper functions with mocked subprocess (session_exists, create_session, new_window,
    split_pane, get_pane_geometries, current_or_base_session). claude_launcher.py
    (currently 34%) — test build_claude_shell_cmd output, find_claude/find_editor
    with mocked shutil.which, load_session/save_session/clear_session round-trip with
    tmp files. This depends on the dedup PR so that detail_panel and git_ops tests
    target the post-dedup code. See pm/plans/plan-e4fa5cb.md for coverage targets.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/64
  gh_pr_number: 64
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-40bb8c2-add-unit-tests-for-low-coverage-modu-e742c9f2
  created_at: null
  updated_at: null
- id: pr-0febd7c
  title: Configurable keybindings
  branch: pm/pr-0febd7c-configurable-keybindings
  status: pending
  depends_on: []
  description: 'Add configurable TUI keybindings support:

    - New pm_core/keymap.py module with default keymap and emacs preset

    - pm keymap init [--preset emacs] [--force] CLI command to generate ~/.pm/keymap.yaml

    - pm keymap show and pm keymap reset commands

    - Refactor all 4 widget on_key handlers (TechTree, PlansPane, TestsPane, PlanPickerScreen)
    from hardcoded keys to action-based dispatch via set_keymap()

    - Dynamic HelpScreen that reflects the active keymap config

    - Dynamic app-level BINDINGS built from keymap at startup

    - Fallback to hardcoded defaults when no config file exists'
  agent_machine: null
  gh_pr: null
  gh_pr_number: null
  plan: plan-003
  created_at: null
  updated_at: null
- id: pr-3563708
  plan: plan-e4fa5cb
  title: Extract PR view, sync, and frame capture from app.py
  branch: pm/pr-3563708-extract-pr-view-sync-and-frame-capture-from-app-py
  status: merged
  depends_on:
  - pr-f24211b
  description: 'Reduce tui/app.py from 1,323 lines to ~550 by extracting three concerns
    into new modules, following the existing pane_ops.py pattern (functions taking
    app as first parameter). (1) tui/frame_capture.py (~120 lines) — move frame capture
    infrastructure: DEFAULT_FRAME_RATE, DEFAULT_FRAME_BUFFER_SIZE constants, get_capture_config_path,
    get_frames_path, load_capture_config, capture_frame, save_frames, setup_frame_watchers,
    and the three on_*_changed callbacks. App keeps a one-line forwarding _capture_frame
    method since it is called from ~15 sites. (2) tui/sync.py (~190 lines) — move
    background and startup sync: background_sync(app), do_normal_sync(app, is_manual),
    startup_github_sync(app). These call app.log_message(), app._update_display(),
    app._show_normal_view() etc. via the app param (no circular imports). (3) tui/pr_view.py
    (~310 lines) — move PR actions and command execution: PR message handlers (handle_pr_selected,
    handle_pr_activated), PR workflow (start_pr, done_pr), tree filtering (hide_plan,
    toggle_merged, cycle_filter), plan movement (move_to_plan, handle_plan_pick),
    command execution (handle_command_submitted, run_command, run_command_sync, run_command_async),
    and the action guard (guard_pr_action, PR_ACTION_PREFIXES). App keeps _run_command
    as a one-line forwarder since pane_ops.py calls app._run_command(). After extraction,
    app.py retains: CSS/BINDINGS (~140 lines), init/compose/lifecycle (~70 lines),
    state loading and view switching (~100 lines), log/status utilities (~60 lines),
    plans view handlers (~80 lines, too small to extract), tests view handlers (~45
    lines, too small to extract), and thin message handler stubs delegating to extracted
    modules (~40 lines). See pm/plans/plan-e4fa5cb.md for the tui/app.py split strategy.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/66
  gh_pr_number: 66
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-3563708-extract-pr-view-sync-and-frame-captu-9b46a99c
  created_at: null
  updated_at: null
- id: pr-b89ae16
  title: Miscellaneous TUI fixes and UX improvements
  branch: pm/pr-b89ae16-miscellaneous-tui-fixes-and-ux-improvements
  status: merged
  depends_on: []
  description: 'A collection of small TUI fixes and UX improvements: remove Enter
    pane (superseded by e key), fix rebalance for non-default tmux windows, fix pr
    start prompt, fix plans pane width, fix command prompt message, fix review window
    second pane, add ? help pane option.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/67
  gh_pr_number: 67
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-b89ae16-miscellaneous-tui-fixes-and-ux-impro-c89a8140
  created_at: null
  updated_at: null
- id: pr-f38005f
  plan: plan-003
  title: Add file locking to project.yaml read-modify-write operations
  branch: pm/pr-f38005f-add-file-locking-to-project-yaml-read-modify-write
  status: in_review
  depends_on:
  - pr-022
  description: 'Add advisory file locking to store.py so that concurrent processes
    (TUI background sync, CLI commands, multiple users) cannot corrupt project.yaml
    with lost-update races. Introduce a locked_update(root, fn) helper that acquires
    an fcntl.flock exclusive lock, loads fresh state, applies mutations, saves, and
    releases. All read-modify-write call sites must migrate to locked_update. Critical
    constraint: lock must never be held across network calls — operations interleaving
    GitHub API calls must be restructured to do the external call first, then acquire
    the lock, load fresh state, merge results, and save. Lock timeout of 2 seconds
    with clear error message.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/109
  gh_pr_number: 109
  created_at: '2026-03-02T01:04:39.190560+00:00'
  updated_at: '2026-03-02T01:27:28.059956+00:00'
  started_at: '2026-03-02T01:04:39.190560+00:00'
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-f38005f-add-file-locking-to-project-yaml-rea-6142872c
  reviewed_at: '2026-03-02T01:27:28.059956+00:00'
- id: pr-c11d04f
  plan: plan-003
  title: Add notes field to PRs for post-start addendums
  branch: pm/pr-c11d04f-add-notes-field-to-prs-for-post-start-addendums
  status: merged
  depends_on: []
  description: 'Add a notes list field to PR entries in project.yaml for recording
    addendums after work has begun. Each note identified by a hash-based ID (note-<hash>,
    like PRs and plans) to avoid sync conflicts. Add pm pr note CLI command to append/list/delete
    notes by hash ID. Notes appear in: pr edit output, TUI detail panel, generate_prompt,
    and generate_review_prompt.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/74
  gh_pr_number: 74
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-c11d04f-add-notes-field-to-prs-for-post-star-d4068f70
  created_at: null
  updated_at: null
- id: pr-9c1af2e
  plan: null
  title: Fix assorted bugs from bugs.txt
  branch: pm/pr-9c1af2e-fix-assorted-bugs-from-bugs-txt
  status: merged
  depends_on: []
  description: 'Fix the following bugs:


    1. Session tag command doesn''t respect --group/--global flags

    2. Help screen and other panes are not scrollable, cut off on small windows

    3. Guide ''pm guide done'' regresses to create-a-plan instead of completing; guide
    may advance from init too early

    4. Step after first Claude session in guide doesn''t auto-start when init session
    finishes

    5. Rebalance hides panes in shared sessions with differently-sized clients

    6. Empty ''import from existing repo'' plan created on init — guide plan not officially
    added, guide session unaware of plan mechanics

    7. Claude H session (and others) don''t know to use TUI input commands instead
    of running shell commands manually; consider making manual execution work too

    8. Start command (and probably others) broken with bare git backend — should be
    covered by new init TUI tests


    Add TUI tests that run through init with an existing repo, a notes-only repo,
    and an empty repo, fully isolated and cleaned up after.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/71
  gh_pr_number: 71
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-9c1af2e-fix-assorted-bugs-from-bugs-txt-c9d34c54
  created_at: null
  updated_at: null
- id: pr-9cf7150
  plan: null
  title: Add review loop mode for iterative PR review until pass
  branch: pm/pr-9cf7150-add-review-loop-mode-for-iterative-pr-review-until
  status: merged
  depends_on: []
  description: 'Add a mode where pm stays in a review loop until Claude reports a
    pass. The loop repeatedly runs the review prompt and watches for the done/pass
    message, similar to wiggum loops. Add a new review verdict PASS_WITH_SUGGESTIONS
    for when there are only non-blocking changes remaining — distinct from PASS (no
    changes needed) and NEEDS_WORK (blocking issues). Options: stop the loop on PASS_WITH_SUGGESTIONS
    (default) or continue until full PASS with no proposed fixes. The TUI should have:
    a way to manually disable/stop the loop, an indicator that the loop is running,
    and the latest review verdict. Build on the existing ''z d'' and review window
    functionality so the user can interrupt at any time. Use a custom prompt that
    watches for the done message.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/72
  gh_pr_number: 72
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-9cf7150-add-review-loop-mode-for-iterative-p-3a8584d0
  created_at: null
  updated_at: null
- id: pr-9177f5e
  plan: plan-003
  title: Add TUI external control request protocol
  branch: pm/pr-9177f5e-add-tui-external-control-request-protocol
  status: pending
  depends_on:
  - pr-024
  description: 'Add a formal mechanism for external processes to request and release
    control of the TUI. pm tui send must first acquire control via pm tui request-control,
    which shows a 3-second popup the current user can deny. On grant: TUI border/background
    changes to warning color, status bar shows ''EXTERNAL CONTROL (user@host)'', local
    keypresses blocked or trigger reclaim. Release via pm tui release-control or auto-expiry
    after 60s. pm tui send refuses without active grant (--force flag for backward
    compat).'
  agent_machine: null
  gh_pr: null
  gh_pr_number: null
  created_at: null
  updated_at: null
- id: pr-70cf9e7
  plan: null
  title: Fix review loop docs and window focus issues
  branch: pm/pr-70cf9e7-fix-review-loop-docs-and-window-focus-issues
  status: merged
  depends_on: []
  description: 'Fix the following bugs:


    1. Meta prompt should know about the override functionality and that it is automatically
    set; all prompts should know about their initialization

    2. Review loop iterations should not change window focus of any sessions — loop
    should run without stealing focus from the user''s active tmux window/pane

    3. Make sure review loop is documented in the help pane and features list in README'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/73
  gh_pr_number: 73
  notes: []
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-70cf9e7-fix-review-loop-docs-and-window-focu-2ed009c1
  created_at: null
  updated_at: null
- id: pr-e29dda7
  plan: null
  title: Investigate and fix tmux server crash on session kill
  branch: pm/pr-e29dda7-investigate-and-fix-tmux-server-crash-on-session-k
  status: pending
  depends_on: []
  description: ''
  agent_machine: null
  gh_pr: null
  gh_pr_number: null
  notes:
  - id: note-b86dd23
    text: 'Research: tmux 3.4 on Linux. Known bugs: (1) segfault when suspended client
      killed — signal handler writes to closed tty (2) status bar #() command substitution
      crash during detach (issue #1030) (3) server exits when all panes gone across
      all sessions (issue #3083) — grouped sessions may trigger this. Instrumentation
      needed: wrap kill-session/kill-pane with pre-checks, log tmux server PID, monitor
      for unexpected death, consider keep-alive sentinel session. Key files: tmux.py:104
      kill_session(), pane_registry.py:119 kill-pane, cli/session.py:64 after-kill-pane
      hook, pane_layout.py:526 handler.'
    created_at: '2026-02-22T01:08:31Z'
    last_edited: '2026-02-22T01:08:31Z'
  - id: note-0524965
    text: 'REFINED: The crash is a full server segfault, not a graceful exit. All
      sessions die including attached ones with active windows. Key suspect: rapid
      sequential kill-session calls in session.py:419-421 (kills grouped sessions
      in a loop then base). Global hooks (after-kill-pane at session.py:64, window-resized
      at session.py:74) fire run-shell commands during the kill cascade — these reference
      sessions/panes that are being destroyed, potentially triggering null pointer
      derefs in the tmux server (similar to issue #2827 pattern). The tmux server
      is single-threaded so a segfault in any hook handler kills everything. Instrumentation:
      (1) add sleep between kill-session calls to test if rapid-fire is the trigger
      (2) temporarily disable global hooks before killing sessions (3) enable core
      dumps and capture the segfault backtrace (4) test with tmux built from master
      to see if upstream already fixed.'
    created_at: '2026-02-22T01:11:33Z'
    last_edited: '2026-02-22T01:11:33Z'
  created_at: null
  updated_at: null
- id: pr-4bd4eac
  plan: null
  title: 'Fix assorted bugs: pm status, review loop pane checks, help text, help pane
    keybindings'
  branch: pm/pr-4bd4eac-fix-assorted-bugs-pm-status-review-loop-pane-check
  status: merged
  depends_on: []
  description: ''
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/75
  gh_pr_number: 75
  notes: []
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-4bd4eac-fix-assorted-bugs-pm-status-review-l-c61824fc
  created_at: null
  updated_at: null
- id: pr-757a140
  plan: null
  title: Prevent SSH disconnect from typing garbage into pm session terminal
  branch: pm/pr-757a140-prevent-ssh-disconnect-from-typing-garbage-into-pm
  status: pending
  depends_on: []
  description: When an SSH connection to a running pm session dies, it types a bunch
    of random characters into the terminal that ran SSH. Try to reproduce this and
    investigate whether this can be mitigated by the tmux session configuration (e.g.
    terminal escape sequence filtering, input handling on client disconnect) or by
    wrapping the SSH process so its broken-pipe output does not reach the active pane.
    It seems like it might be related to mouse mode and scrolling inputting things
    in a different way than when mouse mode is disabled.
  agent_machine: null
  gh_pr: null
  gh_pr_number: null
  notes: []
  created_at: null
  updated_at: null
- id: pr-c773945
  plan: null
  title: Fix TUI UX issues for new users and shared sessions
  branch: pm/pr-c773945-fix-tui-ux-issues-for-new-users-and-shared-session
  status: merged
  depends_on: []
  description: 'Fix the following UX issues:


    1. Multi-line project descriptions copy-pasted in the PlanAddScreen get cut off
    — the add plan prompt should only take a title or file path, and have Claude try
    to fuzzy search the file path


    2. Auto-resize should be disabled for shared sessions — it should stay on the
    size of the smallest monitor connected, not rebalance to a different size


    3. Uppercase vs lowercase keybindings are confusing for new users — make all uppercase-only
    bindings lowercase when nothing is already mapped to the lowercase version (note:
    hjkl are in use for navigation, so skip those)


    4. Notes pane clutters the window — only auto-start the notes pane when the guide
    is not being auto-started


    5. Both the guide and plan management sessions should tell users it is safe to
    close them when they are recommending the next step that will start a new session


    6. Guide prompt should give exposition on what Claude is — that it can do many
    things only an expert programmer can do on your computer but can also explain
    individual pieces or concepts, that the goal of the guide is to allow people who
    have not programmed or programmed very little to build quality code and learn
    anything about programming or computers, and to accelerate development and avoid
    boring repetitive parts; add more emphasis to this in the README


    7. Claude sessions should prefer that the user use the plans pane rather than
    commands, should not autopopulate the command bar with pm plan review since it
    should not be running it itself, should know it is not supposed to run commands
    that generate a new Claude session itself except through commands to the TUI


    8. Merge the Enter and E key entries in the command help pane into a single entry,
    placed where the E key entry currently is'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/76
  gh_pr_number: 76
  notes: []
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-c773945-fix-tui-ux-issues-for-new-users-and--2584c79a
  created_at: null
  updated_at: null
- id: pr-7bc134e
  plan: null
  title: Fix bare git backend, improve beginner mode, and TUI enhancements
  branch: pm/pr-7bc134e-fix-bare-git-backend-improve-beginner-mode-and-tui
  status: merged
  depends_on: []
  description: 'Fix bugs and add UI improvements:


    1. Review diff pane for bare git repo doesn''t show changes — code assumes an
    origin remote and should not for the local git backend


    2. Could have prompt addendums active for users with very little experience so
    Claude makes it easier for them and always recommends next steps, guide prompt
    should ask and set that flag when there is no project.yaml, flag should be in
    project.yaml


    3. Merge for bare git repo doesn''t work since we assume GitHub merge — need separate
    review and done keys for bare git backend, as well as separate review and merge
    commands in the pm tool


    4. Should have some auto-cleanup of panes with user confirmation when in beginner
    mode or an option is enabled, controlled by Claude with prompt addendums


    5. Double check that all prompts are aware when we are in a group session and
    not the main one


    6. Confirm that merged prs aren''t hidden by default and that the pr filter persists
    in the project.yaml


    7. Make sure the s key doesn''t work when dependencies aren''t merged already
    when in beginner mode


    8. Windows for a PR should be killed when PR is merged since you can''t access
    them from the TUI


    9. Have a marker for the latest review status in the PR box in the TUI as well
    as an animation when the session is still working for both start and review sessions


    10. Have a mode where PRs that are ready are automatically started and put into
    review loops when ready, don''t change window focus when in this mode, allow for
    a designated target PR to stop at'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/77
  gh_pr_number: 77
  notes: []
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-7bc134e-fix-bare-git-backend-improve-beginne-0b8b1f32
  created_at: null
  updated_at: null
- id: pr-ad9127e
  plan: null
  title: Improve PR tech tree layout algorithm
  branch: pm/pr-ad9127e-improve-pr-tech-tree-layout-algorithm
  status: merged
  depends_on: []
  description: Look for standard algorithms for laying out nodes in a UI with the
    fewest crossovers and most straight lines. If there is nothing that exactly matches
    our use case, use simulated annealing. If a heavy computation is required, make
    sure it is running in the background and persist the layout for each plan with
    the other plan metadata.
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/78
  gh_pr_number: 78
  notes: []
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-ad9127e-improve-pr-tech-tree-layout-algorith-0b8b1f32
  created_at: null
  updated_at: null
- id: pr-621b3f5
  plan: null
  title: Automate PRs for pm directory changes and new plans
  branch: pm/pr-621b3f5-automate-prs-for-pm-directory-changes-and-new-plan
  status: pending
  depends_on: []
  description: 'Add a command (e.g. pm sync) that commits any pending pm/ directory
    changes (project.yaml, plans, etc.) and opens or updates a PR with those changes.
    Triggered by the user on demand, not automatically. Should handle the common flow:
    stage pm/ changes, commit, push, and create or update a GitHub PR. Should also
    support scoping to a specific plan (e.g. pm sync --plan plan-001), which would
    only include changes to that plan''s file and related project.yaml entries.'
  agent_machine: null
  gh_pr: null
  gh_pr_number: null
  notes: []
  created_at: null
  updated_at: null
- id: pr-473ac84
  plan: null
  title: Add INPUT_REQUIRED verdict to review loop for human-guided testing
  branch: pm/pr-473ac84-add-input-required-verdict-to-review-loop-for-huma
  status: merged
  depends_on: []
  description: Add a new INPUT_REQUIRED verdict to the review prompt and review loop.
    This verdict is used when Claude determines some human-guided testing is required
    before the PR can be signed off on. When this verdict is detected, the review
    loop should pause and wait for the user to confirm they have performed the requested
    tests. Once confirmed, Claude prints an alternative verdict (PASS, PASS_WITH_SUGGESTIONS,
    or NEEDS_WORK) and the loop resumes normal flow. The review prompt should be updated
    to explain when to use INPUT_REQUIRED, what information to include (specific test
    steps for the user), and how it interacts with the rest of the review loop flow.
    Additionally, any prompt that leads into PR creation — such as plan review, plan
    splitting, plan breakdown, etc. — should be updated to proactively identify points
    where human input or manual testing will likely be required, and call these out
    explicitly in the PR description. This ensures INPUT_REQUIRED pauses are anticipated
    from the start rather than being surprises during review.
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/79
  gh_pr_number: 79
  notes: []
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-473ac84-add-input-required-verdict-to-review-b1a90dba
  created_at: null
  updated_at: null
- id: pr-7989302
  plan: null
  title: Pull after merge on github backend with conflict resolution
  branch: pm/pr-7989302-pull-after-merge-on-github-backend-with-conflict-r
  status: merged
  depends_on: []
  description: After a PR is merged via the github backend, automatically pull the
    latest changes into the local repo. If there are uncommitted local changes, stash
    them first, pull, then unstash. If unstashing produces conflicts, treat it as
    a merge error and use the existing flow to launch a Claude merge session to resolve
    the conflicts.
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/80
  gh_pr_number: 80
  notes: []
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-7989302-pull-after-merge-on-github-backend-w-9cfc4712
  created_at: null
  updated_at: null
- id: pr-0996fb8
  plan: null
  title: Fix tmux window-size, horizontal scroll, and session rebalance bugs
  branch: pm/pr-0996fb8-fix-tmux-window-size-horizontal-scroll-and-session
  status: merged
  depends_on: []
  description: 'Fix three tmux/session bugs: (1) _register_tmux_bindings in session.py
    sets window-size=smallest unconditionally on the base session, even for non-shared
    sessions — should only set this when grouped sessions exist (--global or --group
    mode). (2) Automatic horizontal scroll in the TUI only works intermittently —
    reproduce and debug, may be related to cases where no vertical scroll is required.
    (3) Session does not rebalance on ''pm session'' by default — had to press the
    b key for a portrait mode session.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/83
  gh_pr_number: 83
  notes: []
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-0996fb8-fix-tmux-window-size-horizontal-scro-9cfc4712
  created_at: null
  updated_at: null
- id: pr-7f01e33
  plan: null
  title: Auto-resize pane to fit Claude output when selected
  branch: pm/pr-7f01e33-auto-resize-pane-to-fit-claude-output-when-selecte
  status: in_review
  depends_on: []
  description: Intelligently increase the size of a pane to fit Claude's output when
    a session pane is selected. Apply the same behavior for the TUI pane. Allow disabling
    in global settings.
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/82
  gh_pr_number: 82
  notes:
  - id: note-be06609
    text: 'Review testing (review-loop 9a46 i1): Created throwaway project at /tmp/pm-test-autoresize
      with session pm-pm-test-autoresize-f3dc7d3f. Verified: (1) auto_resize_selected_pane
      correctly enlarges the focused pane to 65% of window width (100→130 in a 200-wide
      window), (2) switching to another pane shifts the 65% allocation, (3) no-auto-resize=true
      correctly disables resizing, (4) all 103 unit tests pass.'
    created_at: '2026-03-02T00:35:07Z'
    last_edited: '2026-03-02T00:35:07Z'
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-7f01e33-auto-resize-pane-to-fit-claude-outpu-9cfc4712
  created_at: null
  updated_at: '2026-03-02T00:35:07.784915+00:00'
- id: pr-97c1be3
  plan: null
  title: Add pm pr note subcommand for querying and editing PR notes
  branch: pm/pr-97c1be3-add-pm-pr-note-subcommand-for-querying-and-editing
  status: merged
  depends_on: []
  description: Add a 'pm pr note' subcommand with subcommands for querying and editing
    PR notes. Should support listing notes for a PR, adding a new note, and editing
    or removing existing notes. Notes are stored in the PR's notes field in project.yaml.
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/81
  gh_pr_number: 81
  notes: []
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-97c1be3-add-pm-pr-note-subcommand-for-queryi-9cfc4712
  created_at: null
  updated_at: null
- id: pr-bc3de02
  plan: null
  title: Fix auto-start and review loop verdict detection bugs
  branch: pm/pr-bc3de02-fix-auto-start-bugs-session-restart-input-required
  status: merged
  depends_on:
  - pr-473ac84
  description: 'Four auto-start/review-loop bugs:


    1. Killing and restarting a session that has auto-start enabled while a review
    is running doesn''t result in the review getting restarted properly. The auto-start
    state is persisted in project.yaml but the in-memory review loop state is lost
    on TUI restart. Need to make sure that auto-start can resume properly for any
    initial PR state when the session starts.


    2. The INPUT_REQUIRED flow is wrong. It should not require any interaction from
    the TUI to resolve. The TUI should know when INPUT_REQUIRED is triggered and add
    the marker to the PR and then remove the marker when a new verdict is supplied.
    There should be no functionality in the tui like the new y key. Make sure all
    the prompts and documentation are aware of this change to the flow after implementing
    it. You don''t have to add awareness, just check for any out of date awareness.


    3. The pause marker for INPUT_REQUIRED should be red, not the current color. Update
    the marker style in the tech tree.


    4. Verdict detection produces false positives when verdict keywords appear in
    non-verdict context (e.g. PR titles from pm pr list output). The _match_verdict()
    regex matches any occurrence of verdict keywords surrounded by non-word characters,
    which is too permissive. When Claude runs pm pr list during a review, a PR title
    like "Add INPUT_REQUIRED verdict to review loop" triggers a false INPUT_REQUIRED
    verdict. Fix _match_verdict() and/or _extract_verdict_from_content() to require
    that verdict keywords appear as standalone declarations (e.g. the keyword is the
    dominant content of the line, or appears at the start/end after stripping formatting).
    Apply the same stricter detection logic for ALL verdict keywords (PASS, PASS_WITH_SUGGESTIONS,
    NEEDS_WORK, INPUT_REQUIRED), not just INPUT_REQUIRED.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/84
  gh_pr_number: 84
  notes: []
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-bc3de02-fix-auto-start-bugs-session-restart--9cfc4712
  created_at: null
  updated_at: null
- id: pr-ac1ffc0
  plan: null
  title: Fix post-merge pull to target main repo instead of PR workdir
  branch: pm/pr-ac1ffc0-fix-post-merge-pull-to-target-main-repo-instead-of
  status: merged
  depends_on:
  - pr-7989302
  description: '_pull_after_github_merge() passes the PR''s workdir to the pull logic,
    but the workdir is a worktree checked out to the PR branch, not master. The function
    checks if the workdir is on the base branch (line 972 of pr.py), sees it''s on
    the PR branch, and skips the pull every time.


    The pull should happen in the main repo directory where the TUI is running (which
    is on master), not in the PR''s workdir. Use the pm root''s parent directory or
    the repo path from project.yaml instead of the workdir parameter.


    Also verify the stash/unstash and conflict resolution flow works correctly when
    targeting the main repo directory.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/85
  gh_pr_number: 85
  notes: []
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-ac1ffc0-fix-post-merge-pull-to-target-main-r-f53806a1
  created_at: null
  updated_at: null
- id: pr-c0167ac
  plan: null
  title: Add autonomous monitor session for auto–start issue detection and resolution
  branch: pm/pr-c0167ac-add-autonomous-monitor-session-for-auto-start-issu
  status: merged
  depends_on: []
  description: 'Add an autonomous monitor session that runs alongside auto–start and
    watches the TUI and tmux windows for issues. The session should:


    1. Scan all active tmux panes (session windows, review windows, merge windows)
    for error states, stuck processes, unexpected output, or failed commands.


    2. For issues that don‘t require human input (e.g. a stuck git operation, a failed
    push that can be retried, a pane that died and needs restarting, a merge conflict
    that can be auto–resolved), attempt to fix them automatically.


    3. For issues that do require human input (e.g. ambiguous merge conflicts, authentication
    failures, decisions about code direction), surface them to the user in the later
    described iteration process.


    4. Should be aware of the auto–start state machine (which PRs are being started,
    reviewed, merged) and understand what normal vs abnormal states look like for
    each phase.


    5. Should be told about access to the debug log and tmux pane captures to diagnose
    issues.


    6. Should not interfere with running sessions — read–only observation unless taking
    a corrective action.


    7. Should track general project health — monitor patterns across PRs (recurring
    test failures, dependency bottlenecks, PRs that are taking unusually long or cycling
    through too many review iterations) and reason about whether changes to the plan
    are warranted (e.g. splitting a PR that keeps failing, reordering dependencies,
    flagging PRs whose scope has drifted from their description). Surface plan change
    suggestions to the user rather than making them autonomously.


    8. Should watch other active claude sessions (via tmux pane captures) for signs
    of problems — sessions going off–track, producing errors they are not recovering
    from, or making changes that conflict with other in–flight PRs.


    9. Should periodically check master for oversights or gaps in the plan from an
    architectural perspecitve. Should try to anticipate any future issues or incorrect
    assumptions made during planning.


    10. The monitor loop should work similarly to the review loop but with only two
    verdicts: READY (all issues handled, ready for next iteration) and INPUT_REQUIRED
    (needs human input or wants to surface something, pauses the loop). Unlike the
    review loop, there should be a fixed configurable wait time between iterations.


    12. The session should also check for bugs or improvements to the pm tool itself
    while completing the above steps. Bugs should be appended to pm/bugs.txt and improvements
    to pm/improvements.txt. Writing to these files should no block the next iteration
    (verdict stays READY) UNLESS the bug is actively blocking progress and cannot
    be worked around — only then should it use INPUT_REQUIRED to pause and surface
    the blocker to the user.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/86
  gh_pr_number: 86
  notes: []
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-c0167ac-add-autonomous-monitor-session-for-a-448a51be
  merged_at: '2026-02-26T20:48:04.714413+00:00'
  created_at: '2026-02-26T20:48:04.714413+00:00'
  updated_at: '2026-02-26T20:48:04.714413+00:00'
- id: pr-98d857a
  plan: plan-002
  title: 'Additional benchmark sets: EvalPlus, LiveCodeBench, BigCodeBench'
  branch: pm/pr-98d857a-additional-benchmark-sets-evalplus-livecodebench-b
  status: closed
  depends_on:
  - pr-017
  description: 'Add support for three additional benchmark exercise sources with public
    pass@1 leaderboards, enabling direct comparison of tournament selection results
    against frontier and open-weight models. The current Exercism/aider benchmark
    lacks published pass@1 results, making it hard to gauge how close local models
    + tournament selection get to larger models. (1) EvalPlus (HumanEval+ 164 problems,
    MBPP+ 378 problems): Python function-completion with 80x expanded test suites,
    assert-based tests. Available via evalplus pip package or HuggingFace JSONL. Closest
    to existing Exercism format. Public leaderboard has 100+ models including Qwen2.5-Coder-32B
    (87.2% HE+), DeepSeek-V2 (84.8%), Claude-3.5-Sonnet (86.0%). (2) LiveCodeBench
    (880+ competitive programming problems from LeetCode/AtCoder/Codeforces, continuously
    updated): Stdin/stdout format with input/output test pairs. Different evaluation
    style requiring I/O redirection. Continuously updated to reduce contamination.
    (3) BigCodeBench (1,140 tasks requiring real library APIs like pandas, numpy,
    http.client): Python unittest-based tests with mocking. Harder, more realistic
    than HumanEval. Public leaderboard: GPT-4o 61.1%, Qwen2.5-Coder-32B ~49.6%. Extend
    the exercise loader abstraction to support multiple sources via a --source flag
    on pm bench exercises and pm bench run. Each source implements a common Exercise
    interface. EvalPlus and BigCodeBench use function-completion with test files (similar
    to Exercism). LiveCodeBench requires a stdin/stdout execution path in the executor.'
  agent_machine: null
  gh_pr: null
  gh_pr_number: null
  notes: []
  created_at: null
  updated_at: null
- id: pr-6ef084e
  plan: plan-002
  title: EvalPlus benchmark loader (HumanEval+ and MBPP+)
  branch: pm/pr-6ef084e-evalplus-benchmark-loader-humaneval-and-mbpp
  status: merged
  depends_on:
  - pr-017
  description: 'Add EvalPlus (HumanEval+ 164 problems, MBPP+ 378 problems) as an exercise
    source for pm bench. This is the highest-priority benchmark because it is Python-only
    function-completion with assert-based tests — structurally identical to the existing
    Exercism/Python path. Public pass@1 leaderboard (evalplus.github.io) has 100+
    models including local-class: Qwen2.5-Coder-32B 87.2%/75.1% (HE+/MBPP+), DeepSeek-V2
    84.8%/76.2%, Qwen2.5-Coder-7B 84.1%/71.7%. These numbers let us directly answer
    "how close does 20B+tournament get to 32B single-pass?"


    Exercise format: each problem is a JSONL record with task_id, prompt (function
    signature + docstring), canonical_solution, entry_point, and test (comprehensive
    assert-based test harness with a check(candidate) wrapper). Tests are 80x expanded
    vs original HumanEval. Available from HuggingFace (evalplus/humanevalplus, evalplus/mbppplus)
    or the evalplus pip package.


    Implementation: (1) Add exercises_evalplus.py that downloads HumanEval+ and MBPP+
    JSONL from HuggingFace, caches under ~/.cache/pm-bench/evalplus/, and parses into
    Exercise objects (prompt → description, empty dict → starter_code since these
    are completion-style, test → reference_tests with entry_point-based filename).
    (2) Extend pm bench exercises --source evalplus to list them. (3) Extend pm bench
    run --source evalplus to use them. The executor already handles Python/pytest
    — the test harness just needs the generated code prepended to the check() test
    block, then run with pytest. (4) Add --source flag to exercises CLI and run CLI
    (default: exercism for backwards compat). The Exercise dataclass already has all
    needed fields.


    Testing and eval (INPUT_REQUIRED): Unit tests for JSONL parsing and Exercise field
    mapping. Automated integration: download dataset, verify 164 HE+ and 378 MBPP+
    exercises load. During review, run full evals and save results for the downstream
    comparison table (pr-409b580): (1) 20B: PM_BENCH_URL=http://localhost:30001 pm
    bench run openai/gpt-oss-20b -n 8 --chain --temperature 0.0 -j 4 -l python --source
    evalplus -o /tmp/bench-20b-evalplus.json. (2) After 20B looks good, 120B: PM_BENCH_URL=http://localhost:30000
    pm bench run openai/gpt-oss-120b -n 8 --chain --temperature 0.0 -j 4 -l python
    --source evalplus -o /tmp/bench-120b-evalplus.json. These result JSONs are required
    artifacts — pr-409b580 consumes them for the cross-benchmark comparison table.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/90
  gh_pr_number: 90
  notes: []
  started_at: '2026-02-26T20:52:12.441271+00:00'
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-6ef084e-evalplus-benchmark-loader-humaneval--8e3c5798
  reviewed_at: '2026-02-26T21:18:27.243688+00:00'
  merged_at: '2026-02-26T21:46:34.534354+00:00'
  created_at: '2026-02-26T20:52:12.441271+00:00'
  updated_at: '2026-02-26T21:46:34.534354+00:00'
- id: pr-3060c7e
  plan: plan-002
  title: LiveCodeBench competitive programming loader
  branch: pm/pr-3060c7e-livecodebench-competitive-programming-loader
  status: merged
  depends_on:
  - pr-017
  description: 'Add LiveCodeBench (880+ competitive programming problems from LeetCode/AtCoder/Codeforces,
    continuously updated) as an exercise source for pm bench. Stdin/stdout evaluation
    format — requires a new execution path in executor.py that pipes input to the
    candidate program and compares stdout to expected output (instead of running a
    test file via pytest). Continuously updated post-training-cutoff to reduce contamination.
    Download from HuggingFace (livecodebench/code_generation_lite), cache under ~/.cache/pm-bench/livecodebench/.
    Add --source livecodebench and --difficulty easy/medium/hard flags.


    Implementation: (1) Add exercises_livecodebench.py that downloads the HuggingFace
    dataset, caches under ~/.cache/pm-bench/livecodebench/, and parses into Exercise
    objects. question_content → description, starter_code → starter_code dict, test
    cases → reference_tests encoded as a JSON blob. (2) Add a stdin/stdout execution
    path in executor.py: pipe each test case input to the candidate program via subprocess
    stdin and compare stdout to expected output. Score = matching_outputs / total_test_cases.
    (3) Extend --source livecodebench flag on exercises and run CLI. (4) Support --difficulty
    easy/medium/hard filter.


    Testing and eval (INPUT_REQUIRED): Unit tests for dataset parsing, stdin/stdout
    executor path with known-correct solutions, difficulty filtering. Automated integration:
    download dataset, verify 880+ exercises load. During review, run full evals and
    save results for the downstream comparison table (pr-409b580): (1) 20B easy first
    to validate stdin/stdout executor: PM_BENCH_URL=http://localhost:30001 pm bench
    run openai/gpt-oss-20b -n 8 --chain --temperature 0.0 -j 4 -l python --source
    livecodebench --difficulty easy -o /tmp/bench-20b-lcb-easy.json. (2) 20B full:
    PM_BENCH_URL=http://localhost:30001 pm bench run openai/gpt-oss-20b -n 8 --chain
    --temperature 0.0 -j 4 -l python --source livecodebench -o /tmp/bench-20b-lcb-full.json.
    (3) 120B full: PM_BENCH_URL=http://localhost:30000 pm bench run openai/gpt-oss-120b
    -n 8 --chain --temperature 0.0 -j 4 -l python --source livecodebench -o /tmp/bench-120b-lcb-full.json.
    These result JSONs are required artifacts — pr-409b580 consumes them for the cross-benchmark
    comparison table.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/91
  gh_pr_number: 91
  notes: []
  started_at: '2026-02-26T20:52:18.317036+00:00'
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-3060c7e-livecodebench-competitive-programmin-8e3c5798
  reviewed_at: '2026-02-26T21:14:02.571611+00:00'
  merged_at: '2026-02-26T21:25:31.740557+00:00'
  created_at: '2026-02-26T20:52:18.317036+00:00'
  updated_at: '2026-02-26T21:25:31.740557+00:00'
- id: pr-37b4b31
  plan: plan-002
  title: BigCodeBench real-world task loader
  branch: pm/pr-37b4b31-bigcodebench-real-world-task-loader
  status: merged
  depends_on:
  - pr-017
  description: 'Add BigCodeBench (1,140 tasks, 148 hard subset) as an exercise source
    for pm bench. Tasks require real library APIs (pandas, numpy, http.client, matplotlib)
    with unittest+mock-based tests — hardest benchmark, most realistic. Public leaderboard:
    GPT-4o 61.1%/51.1% complete/instruct, Qwen2.5-Coder-32B ~49.6%. Use instruct_prompt
    mode (NL instructions, better fit for chat models served via vLLM). Download from
    HuggingFace (bigcode/bigcodebench), cache under ~/.cache/pm-bench/bigcodebench/.
    pytest discovers unittest tests natively so basic executor works, but library
    deps from the libs field must be installed. Add --source bigcodebench, --hard,
    and --mode complete/instruct flags.


    Implementation: (1) Add exercises_bigcodebench.py that downloads the HuggingFace
    dataset, caches under ~/.cache/pm-bench/bigcodebench/, and parses into Exercise
    objects. Use instruct_prompt → description, empty starter_code, test → reference_tests
    as a unittest file. (2) pytest discovers unittest natively so no executor changes
    for basic support. Tests use mock.patch — prompt template must instruct model
    to define task_func at module level. (3) Ensure required libraries from libs field
    are installed in pm venv. (4) Extend --source bigcodebench flag. Support --mode
    complete/instruct and --hard for the 148-problem subset.


    Testing and eval (INPUT_REQUIRED): Unit tests for dataset parsing, both prompt
    modes, libs extraction. Automated integration: download dataset, verify 1,140
    exercises (148 hard). Requires library deps installed in pm venv (pandas, numpy,
    matplotlib, etc.). During review, run full evals and save results for the downstream
    comparison table (pr-409b580): (1) 20B hard subset: PM_BENCH_URL=http://localhost:30001
    pm bench run openai/gpt-oss-20b -n 8 --chain --temperature 0.0 -j 4 -l python
    --source bigcodebench --hard -o /tmp/bench-20b-bcb-hard.json. (2) 20B full: PM_BENCH_URL=http://localhost:30001
    pm bench run openai/gpt-oss-20b -n 8 --chain --temperature 0.0 -j 4 -l python
    --source bigcodebench -o /tmp/bench-20b-bcb-full.json. (3) 120B hard: PM_BENCH_URL=http://localhost:30000
    pm bench run openai/gpt-oss-120b -n 8 --chain --temperature 0.0 -j 4 -l python
    --source bigcodebench --hard -o /tmp/bench-120b-bcb-hard.json. These result JSONs
    are required artifacts — pr-409b580 consumes them for the cross-benchmark comparison
    table.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/92
  gh_pr_number: 92
  notes: []
  started_at: '2026-02-26T20:52:24.022031+00:00'
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-37b4b31-bigcodebench-real-world-task-loader-8e3c5798
  reviewed_at: '2026-02-26T21:14:04.591248+00:00'
  merged_at: '2026-02-26T22:21:11.858882+00:00'
  created_at: '2026-02-26T20:52:24.022031+00:00'
  updated_at: '2026-02-26T22:21:11.858882+00:00'
- id: pr-409b580
  plan: plan-002
  title: Cross-source integration and comparison table
  branch: pm/pr-409b580-run-benchmarks-and-publish-comparison-results
  status: merged
  depends_on:
  - pr-6ef084e
  - pr-3060c7e
  - pr-37b4b31
  description: 'After all three benchmark loaders are merged, validate they work together
    and compile a comparison table against published pass@1 leaderboards. By this
    point, each benchmark PR has already produced result JSONs from 20B and 120B eval
    runs during its own review. This PR: (1) Verify cross-source compatibility — run
    pm bench exercises --source evalplus/livecodebench/bigcodebench in sequence to
    confirm all three load without conflict, shared --source flag works correctly,
    and Exercise objects from all sources flow through the orchestrator identically.
    (2) Compile the comparison table from existing result JSONs: for each benchmark,
    show 20B baseline, 20B tournament, 120B baseline, 120B tournament alongside published
    pass@1 for reference models (Qwen2.5-Coder-7B/32B, DeepSeek-V2, GPT-4o). (3) Add
    results JSON files and a summary markdown under pm/bench-results/. This is the
    deliverable that answers "how close does local+tournament get to frontier?"'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/93
  gh_pr_number: 93
  notes: []
  started_at: '2026-02-26T22:21:18.483490+00:00'
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-409b580-run-benchmarks-and-publish-compariso-4ce00db9
  reviewed_at: '2026-02-26T23:05:20.901290+00:00'
  merged_at: '2026-02-26T23:11:43.990481+00:00'
  created_at: '2026-02-26T22:21:18.483490+00:00'
  updated_at: '2026-02-26T23:11:43.990481+00:00'
- id: pr-2a8c3a5
  plan: null
  title: Fix TUI scroll-into-view and improve PR node layout width and spacing
  branch: pm/pr-2a8c3a5-fix-tui-scroll-into-view-and-improve-pr-node-layou
  status: merged
  depends_on: []
  description: 'Three TUI display issues plus sorting and timestamp tracking:

    1. Pressing K to jump to the bottom-most PR at the bottom plan doesn''t scroll
    the view down to it

    2. When moving down to a PR, only the top line comes into view instead of the
    full PR box

    3. PR nodes should take up the full width of the TUI pane instead of being left-justified,
    with more horizontal spacing between PRs that don''t have dependency connections
    than ones that do

    4. Sort PRs by when they were started (most recent first or by activity)

    5. Add timestamp fields to PR entries in project.yaml tracking first and most
    recent start, review, and merge times'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/87
  gh_pr_number: 87
  notes:
  - id: note-c65a465
    text: Set COMPONENT_GAP_CHARS back to 6 (matching H_GAP) so columns of PRs stay
      aligned on a uniform grid across independent components.
    created_at: '2026-02-25T15:00:21Z'
    last_edited: '2026-02-25T15:00:21Z'
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-2a8c3a5-fix-tui-scroll-into-view-and-improve-415a2e6d
  created_at: null
  updated_at: null
- id: pr-f4fbf19
  plan: null
  title: 'Ultrawide monitor support: 3-4 horizontal panes before vertical splitting'
  branch: pm/pr-f4fbf19-ultrawide-monitor-support-3-4-horizontal-panes-bef
  status: merged
  depends_on: []
  description: 'Currently the pane layout splits vertically too early on ultrawide
    monitors, wasting horizontal space.


    Detect ultrawide aspect ratios based on terminal character dimensions (characters
    are ~2x taller than wide):

    - 21:9 physical ≈ 4.6:1 char ratio (e.g. ~271x59): use 3 horizontal panes before
    starting vertical splits

    - 32:9 physical ≈ 7.0:1 char ratio (e.g. ~413x59): use 4 horizontal panes before
    starting vertical splits

    - Standard 16:9 ≈ 3.6:1 char ratio: keep current behavior (2 horizontal then vertical)


    Reference: current 32:9 terminal measures 424x59 characters (7.19:1 char ratio).'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/88
  gh_pr_number: 88
  started_at: '2026-02-26T15:32:02.274280+00:00'
  reviewed_at: '2026-02-26T18:32:24.674217+00:00'
  merged_at: '2026-02-26T18:44:20.992499+00:00'
  notes: []
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-f4fbf19-ultrawide-monitor-support-3-4-horizo-b6481329
  created_at: '2026-02-26T15:32:02.274280+00:00'
  updated_at: '2026-02-26T18:44:20.992499+00:00'
- id: pr-ff68ef5
  plan: null
  title: Single-window focus mode with pane pull/push prefix key
  branch: pm/pr-ff68ef5-single-window-focus-mode-with-pane-pull-push-prefi
  status: in_review
  depends_on: []
  description: 'Add an ''a'' prefix key for pulling panes from command windows into
    the main window and pushing them back.


    Behavior:

    - The ''a'' key acts as a prefix for pulling panes from command windows into the
    main window

    - The same ''a'' prefix sends panes back to their original window

    - Example: ''a s'' on a pending PR starts the implementation window as normal,
    creates a dummy shell pane in the PR window (to prevent it from being killed and
    preserve window numbering), and moves the implementation pane to the main window

    - ''a s'' on an already-started PR just pulls the existing pane without creating
    a new window

    - The dummy pane should display a message explaining the pane movement process
    to the user

    - The prefix works for any command that creates a window (start, review, notes,
    guide, etc.)


    Single-window focus mode (global setting):

    - When enabled, all commands implicitly use the ''a'' prefix — panes are always
    pulled to the main window instead of switching windows

    - Without the setting, the ''a'' prefix still works the same way but must be used
    explicitly

    - The setting is the only difference — the underlying pane pull/push logic is
    identical


    Implementation notes:

    - Window/session creation code should NOT change — this is a layer built on top

    - Shared pane management module for pull/push logic, used by all commands that
    start their own window'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/89
  gh_pr_number: 89
  started_at: '2026-02-26T15:41:30.621658+00:00'
  reviewed_at: '2026-02-27T10:21:50.275823+00:00'
  merged_at: null
  notes: []
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-ff68ef5-single-window-focus-mode-with-pane-p-b6481329
  created_at: '2026-02-26T15:41:30.621658+00:00'
  updated_at: '2026-02-27T10:21:50.275823+00:00'
- id: pr-0f4baf1
  plan: null
  title: 'Fix local backend merge: pull from workdir instead of push'
  branch: pm/pr-0f4baf1-fix-local-backend-merge-pull-from-workdir-instead-
  status: merged
  depends_on: []
  description: 'For local backend, git push origin base_branch fails when origin is
    a non-bare repo with the branch checked out. Replace push with fetch+ff-merge
    from the workdir into the repo dir. Add merge window error handling for local
    and vanilla backends matching the GitHub backend pattern. Implementation is on
    branch: pm/fix-local-merge-push'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/95
  gh_pr_number: 95
  started_at: '2026-02-27T03:20:01.028962+00:00'
  reviewed_at: '2026-02-27T03:27:52.125503+00:00'
  merged_at: '2026-02-27T10:13:09.267401+00:00'
  notes: []
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-0f4baf1-fix-local-backend-merge-pull-from-wo-2b310716
  created_at: '2026-02-27T03:20:01.028962+00:00'
  updated_at: '2026-02-27T10:13:09.267401+00:00'
- id: pr-f81ca27
  plan: null
  title: Add timestamp tracking and time-based PR sorting in TUI
  branch: pm/pr-f81ca27-add-timestamp-tracking-and-time-based-pr-sorting-i
  status: merged
  depends_on: []
  description: 'We already track started_at, reviewed_at, and merged_at timestamps
    on PR entries. Add two new timestamp fields: created_at (set when a PR is first
    added via pm pr add) and updated_at (set whenever the PR entry is modified — status
    changes, edits, notes, etc). Then in the TUI, sort PRs by most recent interaction
    (updated_at) by default, and add a sort menu letting the user choose from all
    available time fields (created_at, started_at, reviewed_at, merged_at, updated_at).'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/96
  gh_pr_number: 96
  started_at: '2026-02-27T03:23:37.480179+00:00'
  reviewed_at: '2026-02-27T10:52:26.716549+00:00'
  merged_at: null
  notes: []
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-f81ca27-add-timestamp-tracking-and-time-base-2b310716
  created_at: '2026-02-27T03:23:37.480179+00:00'
  updated_at: '2026-02-27T10:52:26.716549+00:00'
- id: pr-b764a0c
  plan: null
  title: 'Add plan worker pane: generic Claude session with project context'
  branch: pm/pr-b764a0c-add-plan-worker-pane-generic-claude-session-with-p
  status: in_review
  depends_on: []
  description: 'Add a new pane type for working on plan–level or project–level tasks
    that aren‘t tied to a single PR lifecycle. Unlike implementation/review panes,
    this is an open–ended interactive session where the user works with Claude on
    arbitrary tasks. Key properties: (1) Gets its own workdir (cloned from the repo
    like PR workdirs). (2) Prompt includes project context (plan details, project
    state, available pm commands) but no specific task — the user drives the conversation.
    (3) Not scoped to a single PR — operates at the plan or project level. (4) No
    verdict loop — it‘s an interactive session, not an automated cycle. (5) Could
    be launched via something like pm plan work <plan–id> or similar. The prompt should
    be generic and not reference any specific tools beyond pm itself. Should be launchable
    from the plans pane in the tui with the w key, remap breakdown to d.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/97
  gh_pr_number: 97
  started_at: '2026-02-27T10:12:26.609316+00:00'
  reviewed_at: '2026-02-27T10:54:51.311772+00:00'
  merged_at: null
  notes:
  - id: note-8a49c79
    text: 'Review testing: Created throwaway project at /tmp/pm-test-plan-work with
      local backend. Unable to launch pm session from non-terminal (expected). Verified
      TUI plans view keybindings via the main session. Code review confirms the new
      w=work/d=breakdown keybindings are correctly wired: plans_pane.py _KEY_ACTIONS
      dict, help screen (screens.py), shortcut bar rendering, and event.stop() prevents
      d key conflict with tree view done_pr. All 30 test_plans_pane.py tests pass.
      5 pre-existing test failures unrelated to this PR.'
    created_at: '2026-03-02T00:32:58Z'
    last_edited: '2026-03-02T00:32:58Z'
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-b764a0c-add-plan-worker-pane-generic-claude--2b310716
  created_at: '2026-02-27T10:12:26.609316+00:00'
  updated_at: '2026-03-02T00:32:58.363142+00:00'
- id: pr-0a7d9ee
  plan: null
  title: Add companion workdir pane for implementation and merge windows
  branch: pm/pr-0a7d9ee-add-companion-workdir-pane-for-implementation-and-
  status: in_review
  depends_on: []
  description: 'Review windows already open a second pane cd''ed into the PR workdir.
    Add the same capability for implementation and merge windows. Behavior: a prefix
    key (like PR #89''s focus mode prefix) opens a companion shell pane in the PR''s
    workdir alongside the Claude pane. If the window was already started without the
    companion pane, rerunning with the prefix should reuse the existing window but
    add the second pane rather than recreating the window. Also add a global setting
    (similar to PR #89''s approach) that enables the companion pane by default for
    all new implementation and merge windows without needing the prefix.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/98
  gh_pr_number: 98
  started_at: '2026-02-27T10:25:31.728215+00:00'
  reviewed_at: '2026-02-27T10:59:41.317075+00:00'
  merged_at: null
  notes:
  - id: note-3070712
    text: 'Review iteration 1 testing: Set up throwaway project at /tmp/companion-test-proj.
      TUI session was created and verified basic rendering. Help screen companion
      pane section could not be verified (running pm binary uses master, not PR branch).
      All 13 unit tests pass. 6 pre-existing test failures on master confirmed - none
      caused by this PR.'
    created_at: '2026-03-02T01:02:32Z'
    last_edited: '2026-03-02T01:02:32Z'
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-0a7d9ee-add-companion-workdir-pane-for-imple-61867a33
  created_at: '2026-02-27T10:25:31.728215+00:00'
  updated_at: '2026-03-02T01:02:32.462428+00:00'
- id: pr-4f6b5d4
  plan: null
  title: 'Fix _pull_from_workdir: launch merge session on dirty repo instead of stashing'
  branch: pm/pr-4f6b5d4-fix-pull-from-workdir-launch-merge-session-on-dirt
  status: merged
  depends_on: []
  description: 'Both _pull_from_workdir (local backend) and _pull_after_github_merge
    (GitHub backend) have the same stash bugs: (1) If the operation fails after stashing
    (pull failure, fetch failure, ff-merge failure), the function returns False without
    popping the stash — user''s changes are silently orphaned in git stash. (2) If
    git stash itself fails, the functions just warn and continue operating on the
    dirty working tree, risking data loss. The fix for both functions: remove stash/unstash
    logic entirely. If the repo dir is dirty, detect it upfront and launch a merge
    window (when --resolve-window) to let Claude resolve the situation, or warn and
    return False. This matches the pattern already used for dirty workdir detection
    in pr_merge itself.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/99
  gh_pr_number: 99
  started_at: '2026-02-27T18:43:30.408570+00:00'
  reviewed_at: '2026-02-28T00:29:56.332212+00:00'
  merged_at: '2026-02-28T00:31:27.582019+00:00'
  notes: []
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-4f6b5d4-fix-pull-from-workdir-launch-merge-s-61867a33
  created_at: '2026-02-27T18:43:30.408570+00:00'
  updated_at: '2026-02-28T00:31:27.582019+00:00'
- id: pr-a3a24e5
  plan: null
  title: Detect MERGED verdict from merge windows and finalize regardless of auto-start
  branch: pm/pr-a3a24e5-detect-merged-verdict-from-merge-windows-and-final
  status: merged
  depends_on: []
  description: 'Merge windows tell Claude to output MERGED on its own line when done,
    but nothing ever parses that verdict. The current system instead relies on idle
    detection (30s of no pane content change) then re-running pm pr merge, and this
    whole flow is gated behind auto-start being enabled. Fix: (1) Add actual MERGED
    verdict detection to merge window pane polling, similar to how review_loop detects
    PASS/NEEDS_WORK verdicts. (2) When MERGED is detected, call _finalize_merge directly
    to mark the PR as merged and unblock dependents. (3) This should work whether
    auto-start is enabled or not — the merge window is already open and Claude already
    did the work, finalization should not depend on auto-start. The idle-based re-attempt
    can remain as a fallback but should not be the primary mechanism.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/100
  gh_pr_number: 100
  started_at: '2026-02-28T00:57:58.526336+00:00'
  reviewed_at: '2026-02-28T01:16:04.500026+00:00'
  merged_at: '2026-02-28T01:23:59.075800+00:00'
  notes: []
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-a3a24e5-detect-merged-verdict-from-merge-win-3f86f2fc
  created_at: '2026-02-28T00:57:58.526336+00:00'
  updated_at: '2026-02-28T01:23:59.075800+00:00'
- id: pr-7e9795e
  plan: null
  title: 'Fix infinite merge window loop: don''t pass --resolve-window after MERGED
    verdict'
  branch: pm/pr-7e9795e-fix-infinite-merge-window-loop-don-t-pass-resolve-
  status: merged
  depends_on: []
  description: 'The merge window prompt and verdict handling need a complete overhaul:


    **Prompt changes:**

    - Make it clear that the goal is both to resolve the merge conflict AND ensure
    the repo dir (origin) is updated with the merged code, not just the workdir.

    - Add an INPUT_REQUIRED verdict for when Claude cannot resolve the conflict and
    needs human help. This should be clearly described in the prompt alongside MERGED.


    **Verdict handling changes:**

    - When MERGED is detected, trust it: directly mark the PR as merged in project.yaml
    and propagate to the repo dir. Do NOT re-run the full pm pr merge command (which
    currently causes an infinite loop because it passes --resolve-window, and if the
    re-run fails it opens another merge window, Claude resolves again, outputs MERGED,
    repeat).

    - When INPUT_REQUIRED is detected, mark the PR in the TUI similar to how review
    INPUT_REQUIRED works — surface it to the user so they know human intervention
    is needed. Stop retrying.


    **TUI changes:**

    - Add a visual indicator on the PR in the TUI when a merge window needs human
    input (similar to the existing review INPUT_REQUIRED marker).


    **Testing:**

    - Create a test project with a local backend to verify: set up a scenario where
    the merge has a conflict, the merge window resolves it, MERGED verdict correctly
    finalizes without looping, and INPUT_REQUIRED correctly surfaces to the user.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/101
  gh_pr_number: 101
  started_at: '2026-02-28T04:23:58.632492+00:00'
  reviewed_at: '2026-02-28T04:34:21.876591+00:00'
  merged_at: '2026-03-02T00:02:09.451150+00:00'
  notes: []
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-7e9795e-fix-infinite-merge-window-loop-don-t-d4ad18b8
  created_at: '2026-02-28T04:23:58.632492+00:00'
  updated_at: '2026-02-28T04:34:21.876591+00:00'
- id: pr-30888b1
  plan: null
  title: Fold plan breakdown into plan add step and remove separate breakdown prompt
  branch: pm/pr-30888b1-fold-plan-breakdown-into-plan-add-step-and-remove-
  status: in_review
  depends_on: []
  description: 'The plan add prompt already does a good job breaking the project down
    into PRs. The separate breakdown step (triggered by ''w'' in the plans pane) adds
    an extra manual step that doesn''t add much value since we have the review prompt
    to catch issues. Simplify the flow: fold the first-pass PR breakdown directly
    into the plan add step so that when a plan is created, it already includes the
    PR breakdown. Remove the separate breakdown prompt/command. This reduces the number
    of steps to go from idea to actionable PRs.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/104
  gh_pr_number: 104
  started_at: '2026-03-01T17:51:46.490716+00:00'
  reviewed_at: '2026-03-02T00:28:13.443852+00:00'
  merged_at: null
  notes: []
  created_at: '2026-03-01T17:51:46.490716+00:00'
  updated_at: '2026-03-02T00:28:13.443852+00:00'
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-30888b1-fold-plan-breakdown-into-plan-add-st-c82777eb
- id: pr-3116896
  plan: null
  title: Move Claude panes from current window into their own window
  branch: pm/pr-3116896-move-claude-panes-from-current-window-into-their-o
  status: pending
  depends_on:
  - pr-ff68ef5
  description: 'After PR #89 (single-window focus mode) lands, Claude panes get generated
    in the current tmux window. Add functionality to move these Claude panes out of
    the current window and into their own dedicated window. This is the reverse of
    the pull operation — a push/eject action that takes a Claude pane that was pulled
    into the current window and moves it back to its own window.'
  agent_machine: null
  gh_pr: null
  gh_pr_number: null
  started_at: null
  reviewed_at: null
  merged_at: null
  notes: []
  created_at: null
  updated_at: null
- id: pr-8a60987
  plan: null
  title: Split notes.txt into committed and gitignored files with section–based editing
  branch: pm/pr-8a60987-split-notes-txt-into-committed-and-gitignored-file
  status: merged
  depends_on: []
  description: "Split notes.txt into structured sections that target different prompts\
    \ and git tracking. Use a custom edit screen similar to the way pr edit works\
    \ now. Different sections should have dedicated files.\n\nThe notes file (pm/notes.txt)\
    \ currently has a single block of text included in the implementation prompt only.\
    \ This PR restructures it into sections:\n\nCommitted sections (tracked in git,\
    \ shared with team):\n– General: included in all prompts (impl, review, merge,\
    \ watcher)\n– Implementation: included only in implementation prompts\n– Review:\
    \ included only in review prompts\n– Merge: included only in merge prompts\n–\
    \ Watcher: included only in watcher prompts\n\nLocal section (gitignored, per–user):\n\
    – Local: general–purpose notes not committed to the repo, included in all prompts.\
    \ The backing file for this section should be in the .gitignore. No other files\
    \ for notes sections should be in the gitignore. \n\nThe notes pane in the TUI\
    \ should show all sections in a single editable view. On save, content is routed\
    \ to the appropriate files based on which section it belongs to. The committed\
    \ sections live in pm/notes.txt (or similar) and the local section lives in a\
    \ gitignored file.\n\nprompt_gen.py already includes session notes in all prompts\
    \ (impl, review, merge, watcher) — this PR needs to update notes.py to parse sections\
    \ and expose per–prompt filtering so each prompt generator can request the relevant\
    \ sections."
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/103
  gh_pr_number: 103
  started_at: '2026-03-01T17:48:42.496421+00:00'
  reviewed_at: '2026-03-01T23:17:07.960771+00:00'
  merged_at: '2026-03-02T00:09:52.423211+00:00'
  notes: []
  created_at: '2026-03-01T17:48:42.496421+00:00'
  updated_at: '2026-03-02T00:09:52.423211+00:00'
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-8a60987-split-notes-txt-into-committed-and-g-c82777eb
- id: pr-89296d3
  plan: null
  title: Harden window management against unexpected pane state
  branch: pm/pr-89296d3-harden-window-management-against-unexpected-pane-s
  status: in_review
  depends_on: []
  description: 'Problem: Window management code assumes clean state when creating
    and looking up panes. This breaks when windows already exist with unexpected panes
    (e.g., user manually split a pane, or a previous session left stale windows or
    panes).


    The most concrete bug: hardcoded pane index 0 assumptions. find_claude_pane in
    loop_shared.py, get_first_pane_id in tmux.py, and merge verdict polling in review_loop_ui.py
    all grab panes[0][0], assuming the Claude pane is always the first pane. If a
    window already had a pane at index 0 before the Claude pane was created, the code
    polls the wrong pane.


    Scope:


    1. Rename–or–create window pattern: When creating a named window (impl, review,
    merge, watcher), if a window with that name already exists but has unexpected
    pane state (wrong pane count, unregistered panes), rename the existing window
    (e.g., append –stale–<ts>) and create a fresh one. Do not silently reuse a window
    that might have user–created panes.


    2. Stop relying on pane index 0: Use the pane registry or pane IDs returned from
    window creation instead of assuming panes[0] is Claude. new_window_get_pane already
    returns the actual pane ID — thread that through to callers. For verdict polling,
    look up the registered Claude pane rather than grabbing the first pane.


    3. Validate window state after creation: After new_window + split_pane, verify
    the expected number of panes exist before proceeding. If creation partially failed,
    log and bail rather than silently operating on wrong panes.


    4. Protect against duplicate window names: find_window_by_name returns the first
    match. If multiple windows share a name (possible after races or manual renames),
    log a warning and disambiguate or clean up duplicates. Try to intelligently select
    the one that has pm managed panes to have the pm expected name.


    Key locations:

    – pm_core/loop_shared.py:find_claude_pane — hardcoded panes[0][0]

    – pm_core/tmux.py:get_first_pane_id — hardcoded panes[0][0]

    – pm_core/tui/review_loop_ui.py — merge verdict polling grabs panes[0][0]

    – pm_core/cli/pr.py — window kill/recreate in pr_start, pr_review, _launch_merge_window

    – pm_core/tmux.py:find_window_by_name — returns first match only

    – Pane registry (pm_core/tui/pane_registry.py) — should be the source of truth
    for pane lookups'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/102
  gh_pr_number: 102
  started_at: '2026-03-01T17:48:54.305206+00:00'
  reviewed_at: '2026-03-02T00:28:30.910840+00:00'
  merged_at: null
  notes: []
  created_at: '2026-03-01T17:48:54.305206+00:00'
  updated_at: '2026-03-02T00:28:30.910840+00:00'
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-89296d3-harden-window-management-against-une-c82777eb
- id: pr-eee190a
  plan: null
  title: Add —disconnect–others flag to pm session to disconnect stale clients
  branch: pm/pr-eee190a-add-exclusive-flag-to-pm-session-to-disconnect-sta
  status: merged
  depends_on: []
  description: 'When using a shared (—group) tmux session, a client with a small terminal
    can cause all other clients to be stuck in mobile mode. The stale small client
    forces window–size=smallest to shrink all windows for every viewer. Add a  —disconnect–others
    (–d) option to pm session that detaches all other clients when connecting: list
    all clients on the session group, detach each one, then proceed with normal attach.
    This allows users to reclaim the session and force window sizing to match their
    own terminal.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/107
  gh_pr_number: 107
  created_at: '2026-03-02T00:25:03.873507+00:00'
  updated_at: '2026-03-02T01:45:26.789638+00:00'
  started_at: '2026-03-02T00:35:40.208323+00:00'
  reviewed_at: '2026-03-02T00:43:36.459116+00:00'
  merged_at: '2026-03-02T01:45:26.789638+00:00'
  notes: []
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-eee190a-add-exclusive-flag-to-pm-session-to--6142872c
- id: pr-0e03c9b
  plan: null
  title: Add set_shared_window_size call to watcher window creation
  branch: pm/pr-0e03c9b-add-set-shared-window-size-call-to-watcher-window-
  status: merged
  depends_on: []
  description: 'The watcher/monitor window created by _create_watcher_window() in
    cli/watcher.py does not call tmux_mod.set_shared_window_size() after creating
    the window. All other window creators (cli/pr.py for PR work and review windows,
    cli/meta.py for meta windows, pane_layout.py for TUI respawn) do call it. This
    causes inconsistent window sizing in shared sessions. Fix: after creating the
    watcher window, find it by name and call set_shared_window_size().'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/106
  gh_pr_number: 106
  created_at: '2026-03-02T00:25:06.428240+00:00'
  updated_at: '2026-03-02T01:35:26.856702+00:00'
  started_at: '2026-03-02T00:30:12.934658+00:00'
  reviewed_at: '2026-03-02T00:35:54.105316+00:00'
  merged_at: '2026-03-02T01:35:26.856702+00:00'
  notes: []
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-0e03c9b-add-set-shared-window-size-call-to-w-6142872c
- id: pr-92301fc
  plan: null
  title: Defer PR re-sort until TUI is idle for configurable timeout
  branch: pm/pr-92301fc-defer-pr-re-sort-until-tui-is-idle-for-configurabl
  status: in_review
  depends_on: []
  description: Currently, PR re-sorts happen immediately when project state changes,
    which can be disorienting if the user is actively navigating the TUI (e.g. their
    selected PR jumps position). Re-sort should only trigger after the TUI has been
    idle (no user interaction) for a configurable amount of time, defaulting to 10
    seconds. This prevents the list from shifting under the user mid-navigation while
    still keeping it fresh when they step away.
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/105
  gh_pr_number: 105
  created_at: '2026-03-02T00:29:21.099342+00:00'
  updated_at: '2026-03-02T01:00:23.796516+00:00'
  started_at: '2026-03-02T00:29:39.194707+00:00'
  reviewed_at: '2026-03-02T00:43:40.296320+00:00'
  merged_at: null
  notes:
  - id: note-a20044a
    text: 'Review-loop 7d7d i1 TUI test: Created test project in /tmp/test-resort-pr
      with 5 PRs (mix of statuses). TUI rendered correctly, R (reload) picked up yaml
      changes, r (refresh/sync) triggered deferred path. Fixed bug: _resort_pending
      was only cleared in update_prs/apply_pending_resort but not in direct _recompute()
      calls from pr_view.py (filter/sort/hide). Consolidated clearing into _recompute()
      and added test.'
    created_at: '2026-03-02T01:00:23Z'
    last_edited: '2026-03-02T01:00:23Z'
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-92301fc-defer-pr-re-sort-until-tui-is-idle-f-6142872c
- id: pr-ff5030f
  plan: null
  title: 'Fix stale tests: plans pane key map and watcher prompt assertions'
  branch: pm/pr-ff5030f-fix-stale-tests-plans-pane-key-map-and-watcher-pro
  status: merged
  depends_on: []
  description: 'Update 3 tests that fell out of sync with source changes: remove v/view
    from plans pane key action test (removed in 81b1929), and update watcher prompt
    tests to check for inspection commands instead of inline PR/plan data (changed
    in 6a94d46). Changes on branch pm/pr-ff5030f-fix-stale-tests.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/108
  gh_pr_number: 108
  created_at: '2026-03-02T00:57:47.219490+00:00'
  updated_at: '2026-03-02T01:48:47.705889+00:00'
  started_at: '2026-03-02T01:02:59.405578+00:00'
  reviewed_at: '2026-03-02T01:14:13.094484+00:00'
  merged_at: '2026-03-02T01:48:47.705889+00:00'
  notes: []
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-ff5030f-fix-stale-tests-plans-pane-key-map-a-6142872c
- id: pr-1fedcf8
  plan: null
  title: Skip git pull/checkout in start when workdir has in–progress changes
  branch: pm/pr-1fedcf8-skip-git-pull-checkout-in-start-when-workdir-has-i
  status: in_review
  depends_on: []
  description: pm pr start runs git pull —rebase and checkout_branch on reused workdirs
    even when they have uncommitted in–progress changes, causing failures. Should
    skip these git operations when the workdir is dirty. Also update the start prompt
    to explicitly warn that the directory may contain uncommitted implementation work
    from a previous session if that warning is not already present.
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/110
  gh_pr_number: 110
  created_at: '2026-03-02T01:20:49.010885+00:00'
  updated_at: '2026-03-02T01:27:10.848403+00:00'
  started_at: '2026-03-02T01:22:22.788754+00:00'
  reviewed_at: '2026-03-02T01:27:10.848403+00:00'
  merged_at: null
  notes: []
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-1fedcf8-skip-git-pull-checkout-in-start-when-6142872c
- id: pr-4f8e02b
  plan: null
  title: Persist review loop state across TUI restarts using breadcrumb files
  branch: pm/pr-4f8e02b-persist-review-loop-state-across-tui-restarts-usin
  status: in_progress
  depends_on: []
  description: 'Review loop state (iteration count, verdicts, history) is stored only
    in memory and lost on TUI restart. When a merge triggers a restart, auto-start
    re-detects in_review PRs and restarts loops from iteration 0 with no history.


    Fix by:

    1. Saving ReviewLoopState to breadcrumb files alongside existing auto-start state
    (autostart-resume.json) so loops resume at the correct iteration with history
    intact.

    2. Only persist/restore review loop state on merge-triggered restarts, NOT on
    manual Ctrl+R restarts (current breadcrumb gate via merge-restart marker already
    handles this).

    3. Add a `pm tui restart` CLI command that restarts the TUI from the command line,
    with a flag (e.g. --breadcrumb) to enable breadcrumb file creation for state persistence.
    This gives CLI callers the same merge-restart behavior that trigger_tui_restart()
    provides internally.


    Key locations: auto_start.py save_breadcrumb/consume_breadcrumb (lines 51-127),
    review_loop.py ReviewLoopState (lines 84-100), app.py _review_loops dict (line
    215), cli/helpers.py trigger_tui_restart (lines 303-322).'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/111
  gh_pr_number: 111
  created_at: '2026-03-02T01:34:17.359036+00:00'
  updated_at: '2026-03-02T01:37:45.114694+00:00'
  started_at: '2026-03-02T01:37:45.114694+00:00'
  reviewed_at: null
  merged_at: null
  notes: []
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-4f8e02b-persist-review-loop-state-across-tui-2c888e9b

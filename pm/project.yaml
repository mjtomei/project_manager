project:
  name: project-manager
  repo: https://github.com/mjtomei/project_manager.git
  base_branch: master
  backend: github
  active_pr: pr-011
  guide_deps_reviewed: true
  repo_id: 828c8d0a91034cd541f443dd0aee62961e2af75a
  last_pr_sync: '2026-02-09T04:37:52.251537+00:00'
plans:
- id: plan-001
  name: Import from existing repo
  file: plans/plan-001.md
  status: draft
- id: plan-002
  name: Multi-candidate test-driven code generation
  file: plans/plan-002.md
  status: draft
prs:
- id: pr-001
  plan: plan-001
  title: Add background cluster computation to plan import
  branch: pm/pr-001-add-background-cluster-computation-to-plan-import
  status: pending
  depends_on: []
  description: Run cluster extraction in parallel when `_run_plan_import` starts,
    so results are available without blocking the interactive flow
  agent_machine: null
  gh_pr: null
- id: pr-002
  plan: plan-001
  title: Include cluster suggestions in import prompt
  branch: pm/pr-002-include-cluster-suggestions-in-import-prompt
  status: pending
  depends_on:
  - pr-001
  description: Add cluster analysis results as a "Phase 1.5" in the import prompt
    - Claude receives clusters as a suggested starting point for PR decomposition,
    which can be used, modified, or ignored
  agent_machine: null
  gh_pr: null
- id: pr-003
  plan: plan-001
  title: Add cluster-first option to guide workflow
  branch: pm/pr-003-add-cluster-first-option-to-guide-workflow
  status: pending
  depends_on: []
  description: In the guide's "initialized" step, offer `pm cluster explore` as an
    alternative path alongside `pm plan add`, giving users a choice between manual
    and automated starting points
  agent_machine: null
  gh_pr: null
- id: pr-004
  plan: plan-001
  title: Smart repo-size detection with approach recommendation
  branch: pm/pr-004-smart-repo-size-detection-with-approach-recommenda
  status: pending
  depends_on:
  - pr-003
  description: Detect repo size (lines of code) and recommend manual vs cluster-based
    approach automatically - small repos get manual suggestion, large repos get cluster
    suggestion
  agent_machine: null
  gh_pr: null
- id: pr-005
  plan: plan-001
  title: Improve git remote detection in pm init
  branch: pm/pr-005-improve-git-remote-detection-in-pm-init
  status: merged
  depends_on: []
  description: pm init hardcodes 'origin' remote, but repos may have multiple remotes
    or use different naming (e.g., 'github', 'upstream'). Should detect the correct
    remote by checking if it exists/works, letting user choose when ambiguous, or
    preferring remotes matching the detected backend.
  agent_machine: spark-424d
  gh_pr: null
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-005-improve-git-remote-detection-in-pm-init-5545faf2
- id: pr-006
  plan: plan-001
  title: Add automatic PR sync on TUI refresh and periodic background check
  branch: pm/pr-006-add-automatic-pr-sync-on-tui-refresh-and-periodic-
  status: merged
  depends_on: []
  description: 'Currently pm pr sync must be run manually. Add: (1) automatic sync
    when TUI refreshes (r key), (2) periodic background sync every 5 minutes in TUI,
    (3) sync before pr-related commands. Store last sync timestamp to avoid excessive
    API calls.'
  agent_machine: spark-424d
  gh_pr: null
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-006-add-automatic-pr-sync-on-tui-refresh-and-5545faf2
- id: pr-007
  plan: plan-001
  title: 'GitHub backend: Create draft PR at start, upgrade on done'
  branch: pm/pr-007-github-backend-create-draft-pr-at-start-upgrade-on
  status: merged
  depends_on: []
  description: 'Change GitHub backend flow: (1) pm pr start creates a draft PR immediately
    after first push, stores gh_pr number in project.yaml, (2) pm pr done upgrades
    draft to ready-for-review using ''gh pr ready'', (3) status becomes in_review
    only after upgrading. This gives visibility into WIP earlier and uses GitHub''s
    native draft PR workflow.'
  agent_machine: spark-424d
  gh_pr: null
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-007-github-backend-create-draft-pr-at-start--5545faf2
- id: pr-009
  plan: plan-001
  title: Auto-rebalance after pane launch
  branch: pm/pr-009-auto-rebalance-after-pane-launch
  status: merged
  depends_on: []
  description: After launching a new pane, the layout should automatically rebalance.
    Currently requires manual 'b' keypress to rebalance.
  agent_machine: spark-424d
  gh_pr: null
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-009-auto-rebalance-after-pane-launch-8a71ed5f
- id: pr-010
  plan: plan-001
  title: Isolate workdir pm state from main repo
  branch: pm/pr-010-isolate-workdir-pm-state-from-main-repo
  status: merged
  depends_on: []
  description: 'Agents in workdirs can modify pm/project.yaml and push to GitHub,
    which then gets synced to the main TUI causing unexpected state changes (test
    PRs appearing, status changes, etc.).


    Fix options:

    1. Workdirs should not include pm/ directory at all - agents work on code only

    2. Or workdirs get a read-only copy of pm/ that isn''t pushed

    3. Or agents are instructed not to modify pm state except their own PR status

    4. Or git_ops.sync_state() should only pull pm/ changes from master, not from
    PR branches


    Recommended: Option 1 - exclude pm/ from workdir clones since agents only need
    the code, not the project management state.'
  agent_machine: spark-424d
  gh_pr: null
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-010-isolate-workdir-pm-state-from-main-repo-8a71ed5f
- id: pr-011
  title: Fix plans pane w key launching wrong action
  branch: null
  status: in_progress
  depends_on: []
  description: 'In the plans pane, pressing w (breakdown) sometimes launches pm plan
    review instead of pm plan breakdown. The PlanAction("breakdown") message is posted
    correctly by plans_pane.py, but the app handler routes it to the wrong command.


    Reproduction steps:

    1. Open the TUI and press P to enter plans view

    2. Select a plan (e.g. plan-001)

    3. Press w to trigger breakdown

    4. Check pane registry: the new pane has role "plan-review" running "pm plan review
    plan-001" instead of role "plan-breakdown" running "pm plan breakdown plan-001"

    5. Also observed: first w press sometimes produces no pane at all (no log entry
    for "plan action: breakdown"), while a second w press creates the wrong pane type


    The mismatch may indicate the on_plan_action handler is receiving a different
    action string than expected, or there is a code path where the running TUI code
    diverges from the source on disk.'
  agent_machine: spark-424d
  gh_pr: https://github.com/mjtomei/project_manager/pull/32
  gh_pr_number: 32
  workdir: /home/matt/.pm/workdirs/project-manager-828c8d0a/pm-pr-011-d59a6c15
